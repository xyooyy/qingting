<!DOCTYPE html>
<!--  -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="chrome=1">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<meta name="description" content="Wield powerful weapons to defend your castle from hordes of dragons and demons in this action-packed castle defense game. Upgrade powerful swords, axes and spears to earn the mighty Runeforge! How many monsters can you slay before your castle is overrun?">
	<title> 保卫圣城-轻应用-最大h5游戏分发平台 </title>
    <script type="text/javascript" src="http://qingting.huosu.com/public/js/game-handler.js"></script>

    <link rel="shortcut icon" href="http://arcade.lostdecadegames.com/onslaught_defense/media/images/favicon.ico">
	<link rel="apple-touch-icon-precomposed" href="http://arcade.lostdecadegames.com/onslaught_defense/media/images/icons/114.png">
	<link rel="image_src" href="http://arcade.lostdecadegames.com/onslaught_defense/media/images/icons/114.png">
	<style>
		html, body {
			background: #000;
			margin: 0;
		}
	</style>
	</head>
<body>
	<script type="text/javascript" async="" src="Defense_files/ga.js"></script>
    <script>
/*

*/

__manifest = {"launch": "js/OnslaughtDefense", "title": "Onslaught! Defense", "sizes": [
    [320, 480]
], "description": "Wield powerful weapons to defend your castle from hordes of dragons and demons in this action-packed castle defense game. Upgrade powerful swords, axes and spears to earn the mighty Runeforge! How many monsters can you slay before your castle is overrun?", "shortName": "onslaught_defense", "orientation": "portrait", "favicon": "media/images/favicon.ico", "icons": {"114": "media/images/icons/114.png"}, "version": "1.6.1"};
__intl = {"LOADING": "Loading", "COPYRIGHT": "yx.huosu.com", "HIGH_SCORE": "High score:", "PLAY": "Play", "READY": "READY?", "NEW_HIGH_SCORE": "New High Score!", "PAUSED": "Paused", "YOUR_SCORE": "Your score:", "PLAY_SOUND": "Play sound", "QUIT": "Quit", "CONTINUE": "Continue", "GAME_OVER": "Game Over", "MONSTERS_SLAIN": "Monsters slain:", "PLAY_AGAIN": "Play Again"};
var requirejs, require, define;
(function (a) {
    function i(a, b) {
        var c = b && b.split("/"), e = d.map, f = e && e["*"] || {}, g, h, i, j, k, l, m;
        if (a && a.charAt(0) === "." && b) {
            c = c.slice(0, c.length - 1), a = c.concat(a.split("/"));
            for (k = 0; m = a[k]; k++)if (m === ".")a.splice(k, 1), k -= 1; else if (m === "..") {
                if (k === 1 && (a[2] === ".." || a[0] === ".."))return!0;
                k > 0 && (a.splice(k - 1, 2), k -= 2)
            }
            a = a.join("/")
        }
        if ((c || f) && e) {
            g = a.split("/");
            for (k = g.length; k > 0; k -= 1) {
                h = g.slice(0, k).join("/");
                if (c)for (l = c.length; l > 0; l -= 1) {
                    i = e[c.slice(0, l).join("/")];
                    if (i) {
                        i = i[h];
                        if (i) {
                            j = i;
                            break
                        }
                    }
                }
                j = j || f[h];
                if (j) {
                    g.splice(0, k, j), a = g.join("/");
                    break
                }
            }
        }
        return a
    }

    function j(b, c) {
        return function () {
            return h.apply(a, f.call(arguments, 0).concat([b, c]))
        }
    }

    function k(a) {
        return function (b) {
            return i(b, a)
        }
    }

    function l(a) {
        return function (c) {
            b[a] = c
        }
    }

    function m(d) {
        if (c.hasOwnProperty(d)) {
            var f = c[d];
            delete c[d], e[d] = !0, g.apply(a, f)
        }
        if (!b.hasOwnProperty(d))throw new Error("No " + d);
        return b[d]
    }

    function n(a, b) {
        var c, d, e = a.indexOf("!");
        return e !== -1 ? (c = i(a.slice(0, e), b), a = a.slice(e + 1), d = m(c), d && d.normalize ? a = d.normalize(a, k(b)) : a = i(a, b)) : a = i(a, b), {f: c ? c + "!" + a : a, n: a, p: d}
    }

    function o(a) {
        return function () {
            return d && d.config && d.config[a] || {}
        }
    }

    var b = {}, c = {}, d = {}, e = {}, f = [].slice, g, h;
    g = function (d, f, g, h) {
        var i = [], k, p, q, r, s, t;
        h = h || d;
        if (typeof g == "function") {
            f = !f.length && g.length ? ["require", "exports", "module"] : f;
            for (t = 0; t < f.length; t++) {
                s = n(f[t], h), q = s.f;
                if (q === "require")i[t] = j(d); else if (q === "exports")i[t] = b[d] = {}, k = !0; else if (q === "module")p = i[t] = {id: d, uri: "", exports: b[d], config: o(d)}; else if (b.hasOwnProperty(q) || c.hasOwnProperty(q))i[t] = m(q); else if (s.p)s.p.load(s.n, j(h, !0), l(q), {}), i[t] = b[q]; else if (!e[q])throw new Error(d + " missing " + q)
            }
            r = g.apply(b[d], i);
            if (d)if (p && p.exports !== a && p.exports !== b[d])b[d] = p.exports; else if (r !== a || !k)b[d] = r
        } else d && (b[d] = g)
    }, requirejs = require = h = function (b, c, e, f) {
        return typeof b == "string" ? m(n(b, c).f) : (b.splice || (d = b, c.splice ? (b = c, c = e, e = null) : b = a), c = c || function () {
        }, f ? g(a, b, c, e) : setTimeout(function () {
            g(a, b, c, e)
        }, 15), h)
    }, h.config = function (a) {
        return d = a, h
    }, define = function (a, b, d) {
        b.splice || (d = b, b = []), c[a] = [a, b, d]
    }, define.amd = {jQuery: !0}
})(), define("../djinn/lib/almond", function () {
});
var djinn = {version: "2.6.4"}, bind = function (a, b) {
    return typeof b == "string" && (b = a[b]), function () {
        b.apply(a, arguments)
    }
}, clone = function (a) {
    return JSON.parse(JSON.stringify(a))
}, merge = function () {
    var a = {};
    for (var b = arguments.length - 1; b >= 0; --b) {
        var c = arguments[b];
        if (typeof c != "object")continue;
        for (var d in c)c[d] && a[d] && typeof c[d].concat != "function" && typeof c[d] == "object" && typeof a[d] == "object" ? a[d] = arguments.callee(c[d], a[d]) : a[d] = c[d]
    }
    return a
}, sprintf = function (a) {
    for (var b = 1, c = arguments.length; b < c; ++b)a = a.replace(/%s/, arguments[b]);
    return a
};
if (typeof requestAnimationFrame == "undefined")var requestAnimationFrame = window.mozRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame || window.webkitRequestAnimationFrame || function (a) {
    setTimeout(function () {
        a(Date.now())
    }, 17)
};
var logger = typeof console != "undefined" ? console : {error: function () {
}, info: function () {
}, log: function () {
}, warn: function () {
}};
typeof logger.info != "function" && (logger.info = logger.log), define("djinn/global", function () {
}), define("djinn/Class", [], function () {
    var a = !1, b = /\b_super\b/, c = function () {
    };
    return c.extend = function (c) {
        var d = this.prototype;
        a = !0;
        var e = new this;
        a = !1;
        for (var f in c)e[f] = typeof c[f] == "function" && typeof d[f] == "function" && b.test(c[f]) ? function (a, b) {
            return function () {
                var c = this._super;
                this._super = d[a];
                var e = b.apply(this, arguments);
                return this._super = c, e
            }
        }(f, c[f]) : c[f];
        var g = function () {
            !a && this.init && this.init.apply(this, arguments)
        };
        return g.prototype = e, g.prototype.constructor = g, g.extend = arguments.callee, g
    }, c
}), define("djinn/Emitter", ["djinn/Class"], function (a) {
    return a.extend({init: function (a) {
        var a = a || {};
        this._listenerKey = 0, this._listeners = {}
    }, fire: function (a, b) {
        for (var c in this._listeners) {
            var d = this._listeners[c];
            if (d.eventName == a)if (d.method)d.method.apply(d.context, b); else if (d.methodName) {
                var e = d.context[d.methodName];
                if (typeof e != "function")throw"Could not find method: " + d.methodName;
                e.apply(d.context, b)
            }
        }
    }, on: function (a) {
        var b = {eventName: a};
        if (arguments.length == 2)b.method = arguments[1]; else {
            b.context = arguments[1];
            var c = arguments[2];
            typeof c == "string" ? b.methodName = c : b.method = c
        }
        return this._listeners[++this._listenerKey] = b, this
    }, off: function (a) {
        var b = null;
        for (var c in this._listeners) {
            var d = this._listeners[c];
            if (d.eventName == a)if (arguments.length == 2) {
                if (d.method == arguments[1]) {
                    b = c;
                    break
                }
            } else {
                var e = arguments[1];
                if (e == d.context) {
                    var f = arguments[2];
                    if (typeof f == "string") {
                        if (f == d.methodName) {
                            b = c;
                            break
                        }
                    } else {
                        d.method = f;
                        if (f == d.method) {
                            b = c;
                            break
                        }
                    }
                }
            }
        }
        return b !== null && delete this._listeners[b], this
    }, remove: function () {
        this._listeners = null
    }})
}), define("djinn/math/core", {twoPi: Math.PI * 2, random: function (a, b) {
    return a instanceof Array ? arguments.callee(0, a.length - 1) : Math.round(Math.random() * (b - a)) + a
}, clamp: function (a, b, c) {
    return Math.min(Math.max(a, b), c)
}, intersects: function (a, b) {
    return a.x < b.x + b.width && b.x < a.x + a.width && a.y < b.y + b.height && b.y < a.y + a.height
}, pointInRect: function (a, b) {
    return a.x > b.x && a.y > b.y && a.x < b.x + b.width && a.y < b.y + b.height
}, round: function (a, b) {
    var c = Math.pow(10, b);
    return Math.round(a * c) / c
}}), define("djinn/utils/transitions", [], function () {
    var a = {linear: function (a, b, c, d) {
        return c * a / d + b
    }, easeIn: function (a, b, c, d) {
        return c * (a /= d) * a + b
    }, easeOut: function (a, b, c, d) {
        return-c * (a /= d) * (a - 2) + b
    }, easeBoth: function (a, b, c, d) {
        return(a /= d / 2) < 1 ? c / 2 * a * a + b : -c / 2 * (--a * (a - 2) - 1) + b
    }, inStrong: function (a, b, c, d) {
        return c * (a /= d) * a * a * a + b
    }, outStrong: function (a, b, c, d) {
        return-c * ((a = a / d - 1) * a * a * a - 1) + b
    }, bothStrong: function (a, b, c, d) {
        return(a /= d / 2) < 1 ? c / 2 * a * a * a * a + b : -c / 2 * ((a -= 2) * a * a * a - 2) + b
    }, elasticIn: function (a, b, c, d, e, f) {
        if (a == 0)return b;
        if ((a /= d) == 1)return b + c;
        f || (f = d * .3);
        if (!e || e < Math.abs(c)) {
            e = c;
            var g = f / 4
        } else var g = f / (2 * Math.PI) * Math.asin(c / e);
        return-(e * Math.pow(2, 10 * (a -= 1)) * Math.sin((a * d - g) * 2 * Math.PI / f)) + b
    }, elasticOut: function (a, b, c, d, e, f) {
        if (a == 0)return b;
        if ((a /= d) == 1)return b + c;
        f || (f = d * .3);
        if (!e || e < Math.abs(c)) {
            e = c;
            var g = f / 4
        } else var g = f / (2 * Math.PI) * Math.asin(c / e);
        return e * Math.pow(2, -10 * a) * Math.sin((a * d - g) * 2 * Math.PI / f) + c + b
    }, elasticBoth: function (a, b, c, d, e, f) {
        if (a == 0)return b;
        if ((a /= d / 2) == 2)return b + c;
        f || (f = d * .3 * 1.5);
        if (!e || e < Math.abs(c)) {
            e = c;
            var g = f / 4
        } else var g = f / (2 * Math.PI) * Math.asin(c / e);
        return a < 1 ? -0.5 * e * Math.pow(2, 10 * (a -= 1)) * Math.sin((a * d - g) * 2 * Math.PI / f) + b : e * Math.pow(2, -10 * (a -= 1)) * Math.sin((a * d - g) * 2 * Math.PI / f) * .5 + c + b
    }, backIn: function (a, b, c, d, e) {
        return e === undefined && (e = 1.70158), c * (a /= d) * a * ((e + 1) * a - e) + b
    }, backOut: function (a, b, c, d, e) {
        return e === undefined && (e = 1.70158), c * ((a = a / d - 1) * a * ((e + 1) * a + e) + 1) + b
    }, backBoth: function (a, b, c, d, e) {
        return e === undefined && (e = 1.70158), (a /= d / 2) < 1 ? c / 2 * a * a * (((e *= 1.525) + 1) * a - e) + b : c / 2 * ((a -= 2) * a * (((e *= 1.525) + 1) * a + e) + 2) + b
    }, bounceIn: function (b, c, d, e) {
        return d - a.bounceOut(e - b, 0, d, e) + c
    }, bounceOut: function (a, b, c, d) {
        return(a /= d) < 1 / 2.75 ? c * 7.5625 * a * a + b : a < 2 / 2.75 ? c * (7.5625 * (a -= 1.5 / 2.75) * a + .75) + b : a < 2.5 / 2.75 ? c * (7.5625 * (a -= 2.25 / 2.75) * a + .9375) + b : c * (7.5625 * (a -= 2.625 / 2.75) * a + .984375) + b
    }, bounceBoth: function (b, c, d, e) {
        return b < e / 2 ? a.bounceIn(b * 2, 0, d, e) * .5 + c : a.bounceOut(b * 2 - e, 0, d, e) * .5 + d * .5 + c
    }};
    return a
}), define("djinn/utils/viewEffects", ["djinn/math/core", "djinn/utils/transitions"], function (a, b) {
    return{alert: function (a, c, d) {
        var c = c || {}, e = a.z;
        a.z = Infinity, a.tween({scale: c.scale || 1.5}, (c.duration || 500) / 2, b.easeBoth, function () {
            c.midCallback && c.midCallback()
        }).tween({scale: 1}, (c.duration || 500) / 2, b.easeBoth, function () {
            a.z = e, d && d()
        })
    }, burst: function (a, c, d) {
        a.opacity = 0, a.scale = .5, a.tween({opacity: 1, rotation: Math.PI / 2, scale: 1.5}, 100, b.linear).tween({opacity: 0}, 100, b.linear, function () {
            d && d()
        })
    }, buttonPress: function (a, c, d) {
        a.tween({y: a.y + a.height / 10}, 50, b.linear).tween({y: a.y}, 50, b.linear, d)
    }, fadeOut: function (a, c, d) {
        var c = c || {};
        a.tween({opacity: 0}, c.duration || 1e3, b.linear, d)
    }, fadeIn: function (a, c, d) {
        var c = c || {};
        a.tween({opacity: 1}, c.duration || 1e3, b.linear, d)
    }, popIn: function (c, d, e) {
        var d = d || {}, f = a.random(1, 2) == 1 ? 2 : -2, g = a.clamp(c.x + c.width * f, 0, c.parent.width - c.width), h = c.y;
        c.opacity = d.opacity || 0, c.scale = d.scale || .5, c.y += c.height / 2, c.tween({opacity: 1, scale: 1, x: g, y: h}, 200, b.linear).tween({scale: 1.25}, 50, b.linear).tween({scale: 1}, 50, b.linear, e)
    }, popOut: function (a, c, d) {
        a.opacity = 1, a.tween({scale: .75}, 50, b.linear).tween({opacity: 0, scale: 2}, 250, b.linear, d)
    }, shake: function (a, b, c) {
        a.completeTween();
        var b = b || {}, d = b.iterations || 10, e = (b.duration || 250) / d, f = b.violence || 6, g = a.x, h = a.y;
        for (var i = 0; i < d; ++i)a.tween({x: a.x + f * (i % 2 ? 1 : -1)}, e);
        a.delayTween(0, function () {
            a.x = g, a.y = h, c && c()
        })
    }, vibrate: function (b, c, d) {
        b.completeTween();
        var c = c || {}, e = c.iterations || 10, f = (c.duration || 250) / e, g = c.violence || 6, h = b.x, i = b.y;
        for (var j = 0; j < e; ++j)b.tween({x: b.x + a.random(-g, g), y: b.y + a.random(-g, g)}, f);
        b.delayTween(0, function () {
            b.x = h, b.y = i, d && d()
        })
    }}
}), define("djinn/manifest", [], function () {
    return __manifest
}), define("djinn/globalTimer", ["djinn/Emitter"], function (a) {
    var b = 1e3, c = 50, d = a.extend({init: function (a) {
        this._super(a), this.running = !1, this.fps = 0, this._lastUpdate = 0, this._tickHistory = []
    }, start: function () {
        this.running = !0, this._lastUpdate = Date.now(), this._requestFrame()
    }, stop: function () {
        this.running = !1
    }, _requestFrame: function () {
        this.running && requestAnimationFrame(bind(this, "_update"))
    }, _update: function (a) {
        var c = a - this._lastUpdate;
        c > b && (logger.warn("Dropping large tick: " + c), c = 1), this._recordTick(c), this.fire("tick", [c]), this._lastUpdate = a, this._requestFrame()
    }, _recordTick: function (a) {
        var b = this._tickHistory.push(a);
        if (b > c) {
            var d = 0;
            for (var e = 0; e < b; ++e)d += this._tickHistory[e];
            this.fps = ~~(1e3 / (d / b)), this._tickHistory = []
        }
    }});
    return new d
}), define("djinn/Timer", ["djinn/Emitter", "djinn/globalTimer"], function (a, b) {
    return a.extend({init: function (a) {
        this._super(), this._elapsed = 0, this._loops = 0, this._running = !1, this._tickHost = b, typeof a == "number" ? this.interval = a : typeof a == "object" ? (this.interval = Number(a.interval || 1e3), this._tickHost = a.tickHost || this._tickHost) : this.interval = 1e3, Object.defineProperty(this, "elapsed", {get: function () {
            return this._elapsed
        }}), Object.defineProperty(this, "percentComplete", {get: function () {
            return this._elapsed / this.interval * 100
        }}), Object.defineProperty(this, "running", {get: function () {
            return this._running
        }, set: function (a) {
            a ? this.start() : this.stop()
        }})
    }, reset: function () {
        return this.start()
    }, start: function (a) {
        return a !== undefined && (this.interval = a), this._elapsed = 0, this._running || (this._tickHost.on("tick", this, "_update"), this._running = !0), this
    }, stop: function () {
        return this._running && (this._tickHost.off("tick", this, "_update"), this._running = !1), this
    }, _update: function (a) {
        this._elapsed += a, this._elapsed >= this.interval && (this._elapsed = 0, ++this._loops, this.fire("elapsed", [this._loops]))
    }})
}), define("djinn/XHR", [], function () {
    return function (a, b, c, d) {
        var c = c || {}, e = "", f = new XMLHttpRequest;
        f.open(a, b, !0);
        if (a.toUpperCase() == "POST") {
            for (var g in d)if (typeof d[g] == "object" && d[g].length)for (var h = 0, i = d[g].length; h < i; ++h)e += sprintf("%s[]=%s&", g, encodeURIComponent(d[g][h])); else e += sprintf("%s=%s&", g, encodeURIComponent(d[g]));
            f.setRequestHeader("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8")
        } else f.setRequestHeader("Content-Type", "application/x-javascript");
        f.onreadystatechange = function () {
            f.readyState == 4 && (c.complete && c.complete(f), f.status == 200 ? c.success && c.success(f.responseText) : c.error && c.error(f.status))
        }, f.send(e || null)
    }
}), define("djinn/client", ["djinn/Emitter", "djinn/manifest"], function (a, b) {
    var c = a.extend({init: function (a) {
        this._super(a);
        var c = navigator.userAgent;
        this.pixelRatio = window.devicePixelRatio || 1, this.isBrowser = document && typeof document.getElementsByTagName == "function", this.isTouch = typeof window.ontouchstart != "undefined" || !this.isBrowser, this.isIPhone = /iPhone OS/.test(c), this.isIPad = /iPad/.test(c), this.isIOS = this.isIPhone || this.isIPad, this.isAndroid = /Android/.test(c), this.isFullScreen = window.navigator.standalone === !0, Object.defineProperty(this, "orientation", {get: function () {
            switch (window.orientation) {
                case 0:
                    return"portrait";
                case-90:
                case 90:
                    return"landscape";
                default:
                    return b.orientation == "both" ? this.width > this.height ? "landscape" : "portrait" : b.orientation
            }
        }}), this._cacheDimensions(), this._updateSize();
        if (this.isTouch) {
            var d = bind(this, function (a) {
                a.preventDefault(), this._hideAddressBar()
            }), e = ["touchstart", "touchmove", "touchend"];
            for (var f = 0, g = e.length; f < g; ++f)addEventListener(e[f], d, !1)
        }
        addEventListener("load", bind(this, "_load"), !1), addEventListener("resize", bind(this, "_resize"), !1), addEventListener("orientationchange", bind(this, "_resize"), !1), setInterval(bind(this, "_resize"), 2e3)
    }, _load: function () {
        this._hideAddressBar()
    }, _cacheDimensions: function () {
        this._dimensions = {orientation: window.orientation, width: window.innerWidth, height: window.innerHeight}
    }, _haveDimensionsChanged: function () {
        var a = this._dimensions;
        return a.orientation != window.orientation || a.width != window.innerWidth || a.height != window.innerHeight
    }, _updateSize: function () {
        this.isTouch && (this.isAndroid || this.isIPhone) ? (this.width = window.innerWidth, this.isAndroid ? (document.body.style.height = window.innerHeight + "px", this.height = window.outerHeight / this.pixelRatio, document.body.style.height = this.height + "px") : this.isIPhone && (this.orientation == "portrait" ? this.height = window.screen.height : this.height = window.screen.width, this.height -= 20, this.isFullScreen || (this.height -= this.orientation == "portrait" ? 44 : 32))) : (this.width = window.innerWidth, this.height = window.innerHeight), logger.info("[client._updateSize] " + this.width + "x" + this.height)
    }, _hideAddressBar: function () {
        this.isTouch && setTimeout(function () {
            window.scrollTo(0, 1)
        }, 1)
    }, _resize: function () {
        this._haveDimensionsChanged() && (logger.info(["_resize", this.orientation, window.innerWidth + "x" + window.innerHeight].join(", ")), this._cacheDimensions(), this._updateSize(), this._hideAddressBar(), this.fire("orientationChange"))
    }});
    return new c
}), define("djinn/assets", ["djinn/client", "djinn/XHR", "djinn/manifest"], function (a, b, c) {
    var d = {}, e = {image: ["png", "jpg", "jpeg", "gif"], audio: ["mp3", "ogg"], font: ["ttf"], json: ["json"]}, f = {image: function (b, d, e) {
        var f = new Image;
        f.onload = function () {
            f.ready = !0, d && d(b, f)
        }, f.onerror = function () {
            e && e(b, f)
        };
        if (a.isBrowser && b.substring(0, 5) != "data:")var b = b + "?v=" + c.version;
        return f.src = b, f
    }, audio: function (b, c) {
        var d = new Audio;
        return d.canPlayType("audio/mpeg") ? (a.isBrowser ? (d.addEventListener("canplay", function () {
            d.ready = !0, c && c(b, d)
        }, !1), d.src = b) : (d.src = b, d.load(), d.ready = !0, c && c(b, d)), d) : (logger.warn("No mp3 support: " + b), c && c(b, null), null)
    }, font: function (a, b) {
        var c = /^.*\/([^\.]+)\.ttf$/.exec(a), d = c[1], e = sprintf("@font-face { font-family: '%s'; src: url('%s'); }", d, a), f = document.createElement("style");
        return f && (f.innerHTML = e, document.body.appendChild(f)), b && b(a, null), null
    }, data: function (a, c) {
        return b("GET", a, {complete: function (b) {
            c && c(a, b.responseText)
        }}), ""
    }, json: function (a, b) {
        var c = function (a, c) {
            var d = JSON.parse(c);
            b && b(a, d)
        };
        return f.data(a, c), {}
    }}, g = {};
    return g.cacheImage = function (a, b) {
        d[a] = f.image(b)
    }, g.load = function (a, b, c) {
        if (!a)return;
        typeof a == "string" && (a = [a]);
        var e = a.length, h = 0, i = function (a, f) {
            d[a] = f, ++h;
            var g = h / e;
            c && c(a, f, h, e, g), h >= e && b && b()
        }, j = function (a, b) {
            logger.error("Failed to load asset: " + a), i(a, b)
        };
        for (var k = 0, l = a.length; k < l; ++k) {
            var m = a[k];
            if (typeof m != "string" || m.length <= 0)logger.info("[assets.load] Skipping empty asset path"), --e;
            var n = g.inferAssetType(m), o = f[n];
            d[m] = o(m, i, j)
        }
    }, g.unload = function (a) {
        typeof a == "string" && (a = [a]);
        for (var b = 0, c = a.length; b < c; ++b)delete d[a[b]]
    }, g.get = function (a) {
        return typeof d[a] == "undefined" && (logger.warn("On-the-fly asset load: " + a), g.load(a)), d[a]
    }, g.inferAssetType = function (a) {
        var b = a.match(/\.(.+)/), c = b ? b[1].toLowerCase() : "";
        for (var d in e)if (e[d].indexOf(c) != -1)return d;
        return"data"
    }, g
}), define("djinn/stage", ["djinn/Emitter", "djinn/client", "djinn/math/core", "djinn/manifest"], function (a, b, c, d) {
    var e = null, f = null, g = 1, h = [], i = !1, j = ["touchstart", "touchmove", "touchend"], k = ["mousedown", "mousemove", "mouseup"], l = a.extend({init: function (a) {
        this._super(a), this.eraseBeforeRender = !1, this._maxScale = Infinity, Object.defineProperty(this, "canFullScreen", {get: function () {
            return typeof document.webkitCancelFullScreen == "function"
        }}), Object.defineProperty(this, "isFullScreen", {get: function () {
            return document.webkitIsFullScreen
        }}), Object.defineProperty(this, "maxScale", {get: function () {
            return this._maxScale
        }, set: function (a) {
            this._maxScale = a, this._autoSize()
        }}), Object.defineProperty(this, "width", {get: function () {
            return e.width
        }}), Object.defineProperty(this, "height", {get: function () {
            return e.height
        }}), e = document.createElement("canvas"), e.width = b.width, e.height = b.height, e.style.position = "absolute", e.style.left = 0, e.style.top = 0, this._initInput();
        var c = document.body;
        if (b.isBrowser) {
            var g = document.getElementById(d.gameContainer);
            c = g || c
        }
        c.appendChild(e), b._hideAddressBar(), f = e.getContext("2d"), b.on("orientationChange", this, "_autoSize")
    }, matchSize: function (a) {
        if (!a || a.length === 0) {
            logger.warn("[stage] sizes needs to be set in manifest", a);
            return
        }
        var c = null, d = Infinity;
        for (var f = 0, g = a.length; f < g; ++f) {
            var h = Math.min(a[f][0], a[f][1]), i = Math.max(a[f][0], a[f][1]), j = Math.min(b.width, b.height), k = Math.max(b.width, b.height), l = Math.abs(h * i - j * k);
            l < d && (c = [h, i], d = l)
        }
        e.width = c[0], e.height = c[1], this._autoSize()
    }, localizePoint: function (a, b) {
        return{x: Math.round((a - e.offsetLeft) * (1 / g)), y: Math.round((b - e.offsetTop) * (1 / g))}
    }, renderView: function (a) {
        this.eraseBeforeRender && f.clearRect(0, 0, e.width, e.height), a.preRender(f)
    }, createBuffer: function (a, b) {
        var c = document.createElement("canvas");
        return c.width = Number(a), c.height = Number(b), c.style.display = "none", c
    }, getInputEvents: function () {
        var a = h;
        return h = [], a
    }, requestFullScreen: function () {
        document.body.webkitRequestFullScreen()
    }, cancelFullScreen: function () {
        document.webkitCancelFullScreen()
    }, _getEventType: function (a) {
        switch (a.type) {
            case"touchstart":
            case"mousedown":
                return"inputStart";
            case"touchmove":
            case"mousemove":
                return"inputMove";
            case"touchend":
            case"mouseup":
                return"inputEnd"
        }
    }, _handleInputEvent: function (a) {
        var c = -1, d = 0, e = 0;
        if (b.isTouch) {
            var f = a.type === "touchend" ? a.changedTouches[0] : a.touches[0];
            c = f.identifier, d = f.pageX, e = f.pageY
        } else d = a.pageX, e = a.pageY;
        var g = {id: c, type: this._getEventType(a), point: this.localizePoint(d, e)};
        h.push(g), this.fire(g.type, [g]), !i && this.fire("initialInput"), i = !0
    }, _initInput: function () {
        var a = b.isTouch ? j : k;
        for (var c = 0, d = a.length; c < d; ++c)e.addEventListener(a[c], bind(this, "_handleInputEvent"), !1)
    }, _autoSize: function () {
        var a = Math.min(e.width, e.height), d = Math.max(e.width, e.height);
        e.width = b.orientation == "portrait" ? a : d, e.height = b.orientation == "portrait" ? d : a, g = Math.min(b.width / e.width, b.height / e.height), g = c.clamp(g, 0, this.maxScale), logger.info(sprintf("[stage._autoSize] %sx%s (%s)", e.width, e.height, g));
        if (b.isIOS) {
            logger.info("Using 3D scaling");
            var f = "scale3d(" + g + ", " + g + ", 1)"
        } else var f = "scale(" + g + ")";
        e.style.webkitTransformOrigin = "0 0", e.style.webkitTransform = f, e.style.MozTransformOrigin = "0 0", e.style.MozTransform = f, e.style.msTransformOrigin = "0 0", e.style.msTransform = f, e.style.left = b.width / 2 - e.width * g / 2 + "px", e.style.top = b.height / 2 - e.height * g / 2 + "px", this.fire("resize")
    }});
    return new l
}), define("djinn/View", ["djinn/Emitter", "djinn/utils/transitions", "djinn/assets", "djinn/math/core", "djinn/Timer", "djinn/stage"], function (a, b, c, d, e, f) {
    var g = 0, h = a.extend({_initGetSet: function () {
        Object.defineProperty(this, "right", {get: function () {
            return this.x + this.width
        }, set: function (a) {
            this.x = a - this.width
        }}), Object.defineProperty(this, "bottom", {get: function () {
            return this.y + this.height
        }, set: function (a) {
            this.y = a - this.height
        }}), Object.defineProperty(this, "z", {get: function () {
            return this._z
        }, set: function (a) {
            this._z = a, this.parent && (this.parent.needsResort = !0)
        }}), Object.defineProperty(this, "image", {set: function (a) {
            this._image = c.get(a)
        }}), Object.defineProperty(this, "center", {get: function () {
            return{x: this.x + this.width / 2, y: this.y + this.height / 2}
        }}), Object.defineProperty(this, "boundingBox", {get: function () {
            var a = this._boundingBox;
            return a == null ? {x: this.x, y: this.y, width: this.width, height: this.height} : {x: this.x + a.x, y: this.y + a.y, width: a.width, height: a.height}
        }, set: function (a) {
            this._boundingBox = a
        }}), Object.defineProperty(this, "compositeOpacity", {get: function () {
            var a = this.parent ? this.parent.compositeOpacity : 1;
            return this.opacity * a
        }}), Object.defineProperty(this, "layouts", {set: function (a) {
            this._layouts = a, this._initLayouts()
        }}), Object.defineProperty(this, "canReact", {get: function () {
            return this.acceptInputEvents && this.visible && !this.paused
        }}), Object.defineProperty(this, "absolutePosition", {get: function () {
            var a = this.x, b = this.y, c = this;
            while (c.parent instanceof h)c = c.parent, a += c.x, b += c.y;
            return{x: a, y: b}
        }})
    }, init: function (a) {
        this._initGetSet();
        var b = ++g;
        a = merge(a, {parent: null, id: b, tag: "View_" + b, x: 0, y: 0, z: 1, anchorX: null, anchorY: null, boundingBox: null, acceptInputEvents: !1, captureInputEvents: !0, cancelInputEvents: !1, debug: !1, layouts: null, rotation: 0, clip: !1, width: 0, height: 0, scale: 1, visible: !0, opacity: 1, backgroundColor: null, image: null, imageX: 0, imageY: 0, paused: !1, tickSpeed: 1, flipHorizontal: !1, flipVertical: !1}), a.parent && (a.width = a.width || a.parent.width, a.height = a.height || a.parent.height), this._super(a), this.id = a.id, this.tag = a.tag, this.x = Number(a.x), this.y = Number(a.y), this._z = Number(a.z), this.anchorX = Number(a.anchorX || a.width / 2), this.anchorY = Number(a.anchorY || a.height / 2), this.rotation = Number(a.rotation), this.boundingBox = a.boundingBox, this.width = Number(a.width), this.height = Number(a.height), this.scale = Number(a.scale), this.visible = Boolean(a.visible), this.opacity = Number(a.opacity), this.clip = Boolean(a.clip), this.backgroundColor = a.backgroundColor, this._image = null, this.imageX = Number(a.imageX), this.imageY = Number(a.imageY), this.flipHorizontal = a.flipHorizontal, this.flipVertical = a.flipVertical, this.acceptInputEvents = Boolean(a.acceptInputEvents), this.captureInputEvents = Boolean(a.captureInputEvents), this.cancelInputEvents = Boolean(a.cancelInputEvents), this.paused = Boolean(a.paused), this.tickSpeed = Number(a.tickSpeed), this.debug = Boolean(a.debug), this.children = [], this._removedChildren = [], this.needsResort = !1, this.needsReflow = !1, this.layouts = a.layouts, this._tweenQueue = [], a.image && (this.image = a.image), a.parent && a.parent.addChild(this)
    }, set: function (a) {
        for (var b in a)this[b] = a[b]
    }, addChild: function (a) {
        a.parent && a.removeFromParent(), a.parent = this, this.children.push(a), this.sortChildren()
    }, removeChild: function (a) {
        a.parent == this && this._removedChildren.indexOf(a) == -1 && (a.parent = null, this._removedChildren.push(a))
    }, getChildByTag: function (a) {
        for (var b = 0, c = this.children.length; b < c; ++b) {
            var d = this.children[b];
            if (d.tag == a)return d
        }
        return null
    }, removeFromParent: function () {
        this.parent && this.parent.removeChild(this), this.fire("removedFromParent", [this])
    }, sortChildren: function () {
        this.children.sort(function (a, b) {
            return a.z == b.z ? a.id - b.id : a.z - b.z
        })
    }, reflow: function () {
        this.debug && logger.info(this.tag + ": Reflow");
        var a = this._getCurrentLayout();
        a != null && this.applyLayout(a);
        for (var b = 0, c = this.children.length; b < c; ++b)this.children[b].reflow()
    }, applyLayout: function (a) {
        this.set(a.conf), a.align && this.align.apply(this, a.align);
        for (var b = 0, c = this.children.length; b < c; ++b) {
            var d = this.children[b];
            a.children && a.children[d.tag] && d.applyLayout(a.children[d.tag])
        }
    }, show: function () {
        this.visible = !0
    }, hide: function () {
        this.visible = !1
    }, toggle: function () {
        this.visible = !this.visible
    }, intersects: function (a) {
        return a instanceof h ? d.intersects(a.boundingBox, this.boundingBox) : a.width ? d.intersects(a, this.boundingBox) : d.pointInRect(a, this.boundingBox)
    }, createBoundTimer: function (a, b) {
        var c = new e({interval: a, tickHost: this});
        return c.on("elapsed", this, b), c
    }, react: function (a) {
        if (!this.canReact)return;
        if (this.captureInputEvents) {
            var b = {x: a.point.x - this.x, y: a.point.y - this.y};
            for (var c = this.children.length - 1; c >= 0; --c) {
                var d = this.children[c];
                if (d.canReact && d.intersects(b)) {
                    a.point.x = b.x, a.point.y = b.y, d.react(a);
                    if (a.cancel === !0)return
                }
            }
            a.target || (a.target = this), a.point.x = b.x, a.point.y = b.y, this.fire(a.type, [a]), a.type === "inputStart" ? this._inputStartID = a.id : a.type === "inputEnd" && this._inputStartID === a.id && (this.fire("inputPress", [a]), delete this._inputStartID)
        }
        this.cancelInputEvents && (a.cancel = !0)
    }, preTick: function (a) {
        if (this.paused || !this.visible)return;
        var a = a * this.tickSpeed;
        for (var b = 0, c = this._removedChildren.length; b < c; ++b) {
            var d = this._removedChildren[b], e = this.children.indexOf(d);
            e != -1 ? this.children.splice(e, 1) : logger.warn("Tried to remove non-child " + d.tag + " from " + this.tag)
        }
        this._removedChildren.splice(0, c), this.needsResort && (this.sortChildren(), this.needsResort = !1), this.needsReflow && (this.debug && logger.info(this.tag + ": Needs reflow"), this.reflow(), this.needsReflow = !1), this._updateTween(a), this.tick && this.tick(a), this.fire("tick", [a]);
        for (var b = 0, c = this.children.length; b < c; ++b) {
            var d = this.children[b];
            if (this._removedChildren.indexOf(d) !== -1)continue;
            d.preTick(a)
        }
    }, preRender: function (a) {
        if (!this.visible || this.opacity <= 0)return;
        var b = ~~this.x, c = ~~this.y;
        a.save(), a.translate(b + this.anchorX, c + this.anchorY), a.globalAlpha = this.compositeOpacity, this.rotation != 0 && a.rotate(this.rotation), this.scale != 1 && a.scale(this.scale, this.scale);
        if (this.flipHorizontal || this.flipVertical) {
            var d = this.flipHorizontal ? -1 : 1, e = this.flipVertical ? -1 : 1;
            a.scale(d, e)
        }
        a.translate(-this.anchorX, -this.anchorY), this.clip && (a.beginPath(), a.rect(0, 0, this.width, this.height), a.clip()), this.render && this.width > 0 && this.height > 0 && (this.render(a), this.debug && this._renderDebug(a));
        for (var f = 0, g = this.children.length; f < g; ++f) {
            var h = this.children[f];
            if (this._removedChildren.indexOf(h) !== -1)continue;
            h.preRender(a)
        }
        a.restore()
    }, render: function (a) {
        this._image && this._image.ready ? a.drawImage(this._image, this.imageX, this.imageY, this.width, this.height, 0, 0, this.width, this.height) : this.backgroundColor && (a.fillStyle = this.backgroundColor, a.fillRect(0, 0, this.width, this.height))
    }, align: function (a, b, c, d) {
        if (!this.parent)return;
        if (a !== undefined && a !== null) {
            switch (a) {
                case"left":
                    this.x = 0;
                    break;
                case"right":
                    this.right = this.parent.width;
                    break;
                case"center":
                    this.x = this.parent.width / 2 - this.width / 2
            }
            this.x += c || 0
        }
        if (b !== undefined && b !== null) {
            switch (b) {
                case"top":
                    this.y = 0;
                    break;
                case"bottom":
                    this.y = this.parent.height - this.height;
                    break;
                case"center":
                    this.y = this.parent.height / 2 - this.height / 2
            }
            this.y += d || 0
        }
        return this
    }, centerOn: function (a, b, c) {
        a.width = a.width || 1, a.height = a.height || 1;
        var d = a.x + a.width / 2, e = a.y + a.height / 2;
        return this.x = d - this.width / 2 + (b || 0), this.y = e - this.height / 2 + (c || 0), this
    }, centerAnchor: function () {
        return this.anchorX = this.width / 2, this.anchorY = this.height / 2, this
    }, tween: function (a, c, d, e) {
        if (a != null)for (var f in a) {
            var g = a[f];
            typeof g != "object" && (a[f] = {from: null, to: g})
        }
        return this._tweenQueue.push({properties: a, duration: isNaN(c) ? 1e3 : c, transition: d || b.linear, callback: e || null, elapsed: 0}), this.visible || (logger.warn(this.tag + ": Auto-completing tween because this view is invisible"), this.completeTween()), this
    }, delayTween: function (a, b) {
        return this.tween(null, a, null, b)
    }, cancelTween: function () {
        return this._tweenQueue = [], this
    }, completeTween: function () {
        var a = this._tweenQueue.length, b = this._tweenQueue.splice(0, a);
        for (var c = 0; c < a; ++c) {
            var d = b[c];
            for (var e in d.properties)this[e] = d.properties[e].to;
            d.callback && d.callback()
        }
    }, _updateTween: function (a) {
        if (this._tweenQueue.length < 1)return;
        var b = this._tweenQueue[0];
        b.elapsed += a;
        if (b.properties === null) {
            b.elapsed >= b.duration && (this._tweenQueue.shift(), b.callback && b.callback());
            return
        }
        var c = Math.ceil(b.duration / a), d = Math.floor(c * (b.elapsed / b.duration));
        if (d >= c) {
            for (var e in b.properties)this[e] = b.properties[e].to;
            this._tweenQueue.shift(), b.callback && b.callback()
        } else for (var e in b.properties) {
            var f = b.properties[e];
            f.from == null && (f.from = this[e]);
            var g = b.transition(d, f.from, f.to - f.from, c);
            this[e] = g
        }
    }, _getCurrentLayout: function () {
        var a = f.width + "x" + f.height;
        return this._layouts && this._layouts[a] ? this._layouts[a] : null
    }, _initLayouts: function () {
        if (this._layouts == null)return;
        var a = this._layouts.init, b = a ? a.conf || {} : {}, c = this._getCurrentLayout();
        c && c.conf && (b = merge(c.conf, b)), this.set(b);
        if (a && a.children)for (var d in a.children) {
            var e = a.children[d], f = e.conf || {}, g = this._getCurrentLayout(), i = null;
            g != null && g.children && g.children[d] && (i = g.children[d], f = merge(i.conf, f));
            var j = e.ctor || h, k = new j(merge({parent: this, tag: d}, f));
            i && i.align && k.align.apply(k, i.align)
        }
        this.reflow()
    }, _renderDebug: function (a) {
        a.lineWidth = 1;
        var b = this.boundingBox, c = b.x - this.x, d = b.y - this.y;
        a.fillStyle = "rgba(255, 0, 0, 0.15)", a.fillRect(c, d, b.width, b.height), a.strokeStyle = "rgb(255, 0, 0)", a.strokeRect(c, d, b.width, b.height), a.strokeStyle = "rgb(0, 0, 255)", a.strokeRect(0, 0, this.width, this.height)
    }});
    return h.transitions = b, h
}), define("djinn/helpers/RotateDeviceView", ["djinn/View"], function (a) {
    return a.extend({init: function (b) {
        var b = merge(b, {visible: !1, z: Infinity, backgroundColor: "rgb(255, 255, 255)"});
        this._super(b), this._rotateView = (new a({parent: this, width: 250, height: 250, image: "__rotateImage"})).align("center", "center")
    }, reflow: function () {
        this.width = this.parent.width, this.height = this.parent.height, this._rotateView.align("center", "center"), this._super()
    }})
}), define("djinn/ui/ProgressBar", ["djinn/View"], function (a) {
    return a.extend({init: function (a) {
        var a = merge(a, {progress: 0});
        this._super(a), this.progress = Number(a.progress)
    }, render: function (a) {
        this._super(a);
        var b = this.width * this.progress;
        a.fillStyle = "rgb(100, 100, 100)", a.fillRect(0, 0, b, this.height), a.lineWidth = 2, a.strokeStyle = "rgb(230, 230, 230)", a.strokeRect(0, 0, this.width, this.height)
    }})
}), define("djinn/TextView", ["djinn/View", "djinn/client"], function (a, b) {
    var c = a.extend({init: function (a) {
        Object.defineProperty(this, "text", {get: function () {
            return this._rawText
        }, set: function (a) {
            this._lineBuffer = null, this._rawText = a ? String(a) : null
        }}), a = merge(a, c.defaults), a.parent && (!a.width || a.width < 1) && (a.width = a.parent.width);
        if (!a.height || a.height < 1)a.height = a.fontSize;
        this._super(a), this._lineBuffer = null, this.fontSize = Number(a.fontSize), this.fontFamily = a.fontFamily, this.color = a.color, this.shadowColor = a.shadowColor, this.strokeColor = a.strokeColor, this.strokeWidth = a.strokeWidth, this.textAlign = a.textAlign, this.verticalAlign = a.verticalAlign, this.text = a.text
    }, render: function (a) {
        this._super(a);
        if (this.text === undefined || this.text === null || this.text.length < 1)return;
        this._lineBuffer == null && this._bufferLines(this.text, a);
        var c = drawY = 0;
        this.textAlign == "center" && (c = this.width / 2), this.textAlign == "right" && (c = this.width), this.verticalAlign == "middle" && (drawY = this.height / 2), this._applyContextSettings(a);
        for (var d = 0, e = this._lineBuffer.length; d < e; ++d) {
            var f = drawY + d * this.fontSize, g = this._lineBuffer[d];
            this.shadowColor && (a.fillStyle = this.shadowColor, a.fillText(g, c + 1, f + 1)), !b.isTouch && this.strokeColor && this.strokeWidth && (a.lineWidth = this.strokeWidth, a.strokeStyle = this.strokeColor, a.strokeText(g, c, f)), a.fillStyle = this.color, a.fillText(g, c, f)
        }
    }, _applyContextSettings: function (a) {
        a.font = this.fontSize + "px " + this.fontFamily, a.textAlign = this.textAlign, a.textBaseline = this.verticalAlign
    }, _bufferLines: function (a, b) {
        var a = String(a);
        this._lineBuffer = [], this._applyContextSettings(b);
        var c = a.split(" "), d = 0;
        for (var e = 0, f = c.length; e < f; ++e) {
            var g = this._lineBuffer[d] || "", h = g.length > 0 ? g + " " + c[e] : c[e];
            g.length > 0 && b.measureText(h).width > this.width ? (++d, this._lineBuffer[d] = c[e]) : this._lineBuffer[d] = h
        }
    }});
    return c.defaults = {fontSize: 20, fontFamily: "Arial", color: "rgb(0, 0, 0)", textAlign: "left", verticalAlign: "top", text: ""}, c
}), define("djinn/helpers/LoadingScreen", ["djinn/manifest", "djinn/assets", "djinn/View", "djinn/TextView", "djinn/ui/ProgressBar", "djinn/utils/viewEffects"], function (a, b, c, d, e, f) {
    var g = merge(a.splash, {fadeDuration: 1, displayDuration: 0, backgroundColor: "rgb(0, 0, 0)", imageWidth: 100, imageHeight: 100});
    return c.extend({init: function (a) {
        Object.defineProperty(this, "loadingProgress", {set: function (a) {
            this._loadingBar.progress = a, this._loadingText.text = "LOADING: " + ~~(a * 100) + "%"
        }});
        var a = merge({tag: "LoadingScreen", acceptInputEvents: !0, cancelInputEvents: !0, visible: !1, backgroundColor: g.backgroundColor, z: Infinity}, a);
        this._super(a), g.image && (b.load(g.image), this._splashImage = (new c({parent: this, image: g.image, width: g.imageWidth, height: g.imageHeight})).align("center", "center"));
        var f = this.height * .05;
        this._loadingBar = (new e({parent: this, visible: !1, width: this.width * .8, height: f})).align("center", "bottom", 0, -f), this._loadingText = (new d({parent: this, visible: !1, text: "LOADING", textAlign: "center", verticalAlign: "middle", color: "rgb(255, 255, 255)", fontSize: ~~(f * .75), height: f})).align("center", "bottom", 0, -f), this._uiDelayTimer = this.createBoundTimer(500, bind(this, "_onDelayElapsed")), this.on("inputStart", this, "_onInputStart")
    }, show: function (a) {
        this.set({opacity: 0, visible: !0}), f.fadeIn(this, {duration: g.fadeDuration}), this.delayTween(g.displayDuration, function () {
            a && a()
        }), this._uiDelayTimer.start()
    }, hide: function (a) {
        this.acceptInputEvents = !1, f.fadeOut(this, {duration: g.fadeDuration}, bind(this, function () {
            this.visible = !1, a && a()
        }))
    }, _onDelayElapsed: function () {
        this._uiDelayTimer.stop(), this._loadingBar.progress < 1 && (this._loadingText.visible = !0, this._loadingBar.visible = !0)
    }, _onInputStart: function (a) {
        this._onDelayElapsed(), this.completeTween()
    }})
}), define("djinn/Game", ["djinn/Emitter", "djinn/globalTimer", "djinn/client", "djinn/stage", "djinn/View", "djinn/TextView", "djinn/helpers/RotateDeviceView", "djinn/helpers/LoadingScreen", "djinn/manifest", "djinn/assets"], function (a, b, c, d, e, f, g, h, i, j) {
    return a.extend({init: function (a) {
        var a = merge(a, {showLoadingScreen: !1});
        this._super(a), this.showLoadingScreen = a.showLoadingScreen, this._splashFinished = !1, this._loadingProgress = 0, this.view = new e({tag: "GameRootView", acceptInputEvents: !0, width: d.width, height: d.height}), d.on("resize", this, "_onStageResize");
        if (i.orientation != "both") {
            this._rotateDeviceView = new g({parent: this.view});
            var b = bind(this, function () {
                i.orientation != c.orientation ? this._rotateDeviceView.show() : this._rotateDeviceView.hide()
            });
            c.on("orientationChange", b), b()
        }
        this._loadingScreen = new h({parent: this.view, visible: !1})
    }, run: function () {
        b.on("tick", this, "_update"), b.start(), this.showLoadingScreen && (d.eraseBeforeRender = !0, this._loadingScreen.show(bind(this, "_onSplashFinish")))
    }, stop: function () {
        b.stop(), b.off("tick", this)
    }, preloadAssets: function (a) {
        j.load(a, bind(this, "_onLoadComplete"), bind(this, "_onLoadProgress"))
    }, _onLoadProgress: function (a, b, c, d, e) {
        this._loadingProgress = e, this._loadingScreen.loadingProgress = this._loadingProgress, this._checkGameReady()
    }, _onLoadComplete: function () {
        this.fire("load")
    }, _update: function (a) {
        this._react(), this.view.preTick(a), this._render()
    }, _react: function () {
        var a = d.getInputEvents(), b = a.length;
        for (var c = 0; c < b; ++c)this.view.react(a[c])
    }, _render: function () {
        d.renderView(this.view)
    }, _onStageResize: function () {
        this.view.width = d.width, this.view.height = d.height, this.view.reflow()
    }, _onSplashFinish: function () {
        this._splashFinished = !0, this._checkGameReady()
    }, _checkGameReady: function () {
        this._splashFinished && this._loadingProgress === 1 && this._loadingScreen.hide(bind(this, function () {
            d.eraseBeforeRender = !1, this.fire("ready")
        }))
    }})
}), define("djinn/intl", [], function () {
    var a = __intl || {};
    return{get: function (b) {
        return a[b] ? arguments.length == 1 ? a[b] : (arguments[0] = a[b], sprintf.apply(arguments, arguments)) : sprintf("[undefined intl: %s]", b)
    }}
}), define("djinn/Model", ["djinn/Emitter"], function (a) {
    return a.extend({init: function (a) {
        this._super(a), this.persists = !1, this.storageKey = null, this.attributes = a || {}
    }, add: function (a, b) {
        var c = this.get(a);
        c += Number(b), this.set(a, c)
    }, has: function (a) {
        return this.attributes.hasOwnProperty(a)
    }, set: function () {
        if (typeof arguments[0] == "string") {
            var a = {};
            a[arguments[0]] = arguments[1], this._set(a, arguments[2])
        } else this._set(arguments[0], arguments[1])
    }, get: function (a, b) {
        return this.has(a) ? this.attributes[a] : b
    }, load: function () {
        var a = localStorage.getItem(this.storageKey);
        return a ? (a = JSON.parse(a), this.set(a, {nosave: !0}), this.fire("load"), !0) : !1
    }, save: function () {
        if (!this.persists)return!1;
        if (this.storageKey == null)return logger.warn("No .storageKey specified. Cannot save model."), !1;
        var a = JSON.stringify(this.attributes);
        try {
            localStorage.setItem(this.storageKey, a)
        } catch (b) {
            logger.error("Failed to set localStorage! Quota exceeded?")
        }
        return!0
    }, _set: function (a, b) {
        var b = b || {};
        for (var c in a) {
            var d = this.attributes[c];
            this.attributes[c] = a[c], b.silent !== !0 && this.fire("changed:" + c, [
                {target: this, oldValue: d, newValue: a[c]}
            ])
        }
        b.nosave !== !0 && this.save(), b.silent !== !0 && this.fire("changed", [
            {target: this}
        ])
    }})
}), define("js/model/GameModel", ["djinn/Model", "djinn/math/core", "djinn/manifest"], function (a, b, c) {
    var d = a.extend({init: function (a) {
        this._super({highScore: 10, soundEnabled: !0}), this.persists = !0, this.storageKey = c.shortName, this.load(), this.MAX_PLAYER_HEALTH = 5, this.WEAPON_DURATION = 2e4
    }, equipWeapon: function (a) {
        this.fire("gotWeapon", [a])
    }, healPlayer: function (a) {
        this.playerHealth += a, this.playerHealth = b.clamp(this.playerHealth, 0, this.MAX_PLAYER_HEALTH), this.fire("playerHealed", [this.playerHealth])
    }, hitPlayer: function (a) {
        this.playerHealth -= a, this.playerHealth = b.clamp(this.playerHealth, 0, this.MAX_PLAYER_HEALTH), this.fire("playerDamaged")
    }, isPlayerHurt: function () {
        return this.playerHealth < this.MAX_PLAYER_HEALTH
    }, reset: function () {
        this.playerHealth = this.MAX_PLAYER_HEALTH
    }});
    return new d
}), define("djinn/math/Vector2", ["djinn/Class"], function (a) {
    var b = a.extend({init: function (a) {
        return a === undefined && (a = {x: 0, y: 0}), typeof a == "number" ? (this.x = Number(a), this.y = Number(arguments[1])) : a.angle === undefined ? (this.x = Number(a.x || 0), this.y = Number(a.y || 0)) : (this.x = a.magnitude * Math.cos(a.angle), this.y = a.magnitude * Math.sin(a.angle)), Object.defineProperty(this, "angle", {get: function () {
            return Math.atan2(this.y, this.x)
        }}), Object.defineProperty(this, "heading", {get: function () {
            return Math.atan2(this.x, -this.y)
        }}), this
    }, add: function (a) {
        return this.x += a.x, this.y += a.y, this
    }, clone: function () {
        return new this.constructor({x: this.x, y: this.y})
    }, floor: function () {
        return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this
    }, getUnitVector: function () {
        return new b({angle: this.angle, magnitude: 1})
    }, magnitude: function () {
        return Math.sqrt(this.x * this.x + this.y * this.y)
    }, minus: function (a) {
        return new b({x: this.x - a.x, y: this.y - a.y})
    }, normalize: function () {
        var a = this.magnitude();
        return a === 0 ? this : this.scale(1 / a)
    }, scale: function (a) {
        return this.x *= a, this.y *= a, this
    }, subtract: function (a) {
        return this.x -= a.x, this.y -= a.y, this
    }, toAngle: function () {
        return this.heading * (180 / Math.PI)
    }});
    return b.makeFromHeading = function (a, c) {
        var c = Number(c) || 1;
        return new b({x: Math.sin(a) * c, y: -Math.cos(a) * c})
    }, b
}), define("djinn/Sprite", ["djinn/View"], function (a) {
    return a.extend({init: function (a) {
        Object.defineProperty(this, "currentAnimation", {get: function () {
            return this._currentAnim
        }}), Object.defineProperty(this, "tickSpeed", {get: function () {
            return this._tickSpeed || 1
        }, set: function (a) {
            if (this._animating) {
                var b = a / (this._tickSpeed || 1);
                this._frameElapsed *= b
            }
            this._tickSpeed = a
        }}), a = merge(a, {animations: {}}), this._super(a), this._animations = a.animations, this._animating = !1, this._currentAnim = null, this._frameElapsed = 0, this._frameIndex = 0;
        for (var b in this._animations)this._animations[b] = merge(this._animations[b], {frames: [], frameRate: 12, flipHorizontal: !1, flipVertical: !1, loop: !0})
    }, tick: function (a) {
        if (!this._animating || !this._currentAnim)return;
        var b = this._animations[this._currentAnim];
        b === undefined && logger.warn("Animation not defined: ", this._currentAnim), this._frameElapsed += a;
        if (this._frameElapsed >= 1e3 / b.frameRate) {
            this._frameElapsed = 0, ++this._frameIndex;
            var c = b.frames.length - 1;
            this._frameIndex > c && (b.loop == 0 ? (this._frameIndex = c, this._animating = !1, this.fire("animationEnd")) : this._frameIndex = 0)
        }
    }, render: function (a) {
        if (this._currentAnim) {
            var b = this._animations[this._currentAnim], c = b.frames[this._frameIndex], d = c[0], e = c[1];
            if (this._image && this._image.ready) {
                (b.flipHorizontal || b.flipVertical) && a.scale(b.flipHorizontal ? -1 : 1, b.flipVertical ? -1 : 1);
                if (d + this.width > this._image.width || e + this.height > this._image.height) {
                    logger.warn("Invalid sprite coordinates!");
                    return
                }
                a.drawImage(this._image, d, e, this.width, this.height, 0, 0, this.width, this.height)
            }
        } else this._super(a)
    }, playAnimation: function (a, b) {
        if (this._currentAnim != a || b !== !1)this._animating = !0, this._currentAnim = a, this._frameIndex = 0, this._frameElapsed = 0
    }})
}), define("js/data/weapons", {axe: {bounce: !0, damage: 10, interval: 200, rotate: !0, speed: 250}, axe2: {bounce: !0, damage: 15, interval: 250, rotate: !0, speed: 300}, axe3: {bounce: !0, damage: 20, interval: 250, rotate: !0, sound: "xamAttackIce", speed: 300}, spear: {damage: 10, interval: 400, speed: 600}, spear2: {damage: 15, interval: 300, speed: 700}, spear3: {damage: 20, interval: 250, speed: 800}, sword: {damage: 10, interval: 400, speed: 250}, sword2: {damage: 15, interval: 250, speed: 300}, sword3: {damage: 20, interval: 200, sound: "xamAttackFire", speed: 500}, runeforge: {damage: 30, interval: 150, sound: "xamAttackFire", speed: 750}}), define("js/view/DifficultyView", ["djinn/View"], function (a) {
    return a.extend({init: function (a) {
        var a = merge(a, {opacity: .5});
        this._super(a)
    }, render: function (a) {
        var b = 10, c = 100, d = c / 2;
        a.fillStyle = "rgb(0, 0, 0)", a.fillRect(this.center.x - d, this.center.y - d, c, c), a.fillStyle = "rgb(250, 250, 0)", a.fillRect(this.center.x - d, this.center.y + d, c, -(c * (this.difficulty.value / 100))), a.font = "20px Verdana", a.textAlign = "center", a.fillText(Math.round(this.difficulty.value), this.center.x, this.center.y);
        var e = 1.6, f = (this.difficulty.rateOfIncrease - e) / e;
        a.fillStyle = "rgb(250, 0, 0)", a.fillRect(this.center.x - d - b, this.center.y + d, b, -(c * f));
        var f = Math.sin(this.difficulty.fluctuation);
        a.fillStyle = "rgb(0, 0, 250)", a.fillRect(this.center.x + d, this.center.y, b, d * f)
    }})
}), define("js/view/viewData", {width: 320, height: 480, backgroundColor: "rgb(10, 10, 10)", color: "rgb(240, 240, 240)", margin: 10, fontFamily: "Arial", fontSize: 16, shadowColor: "rgb(10, 10, 10)", targetMaxY: 346, numbers: {fontFamily: "Arial Black", strokeColor: "rgb(10, 10, 10)", strokeWidth: 3}, bars: {backgroundColor: "rgba(10, 10, 10, 0.75)", getColor: function (a) {
    return a <= .25 ? "rgb(250, 30, 37)" : a <= .5 ? "rgb(233, 116, 28)" : "rgb(64, 188, 63)"
}, height: 6}, objects: {image: "media/images/objects.png", width: 32, height: 32, types: {heart: {imageX: 128, imageY: 0}, starburst: {imageX: 160, imageY: 0, z: 3}, axe: {imageX: 0, imageY: 64}, axe2: {imageX: 32, imageY: 64}, axe3: {imageX: 64, imageY: 64}, spear: {imageX: 0, imageY: 32}, spear2: {imageX: 32, imageY: 32}, spear3: {imageX: 64, imageY: 32}, sword: {imageX: 0, imageY: 0}, sword2: {imageX: 32, imageY: 0}, sword3: {imageX: 64, imageY: 0}, runeforge: {imageX: 92, imageY: 0}}}, modal: {image: "media/images/modal.png", offsetX: 4, width: 264, height: 264}, titleScreen: {image: "media/images/title_bg.png", title: {image: "media/images/title.png", y: 24, width: 316, height: 142}, highScore: {fontSize: 18, valueFontSize: 48, x: 95, y: 220}, button: {x: 196, y: 316}, monsters: {image: "media/images/title_monsters.png", x: 38, width: 246, height: 94}}, button: {image: "media/images/button.png", color: "rgb(240, 240, 240)", width: 118, height: 56}, battleScreen: {fontSize: 48, painColor: "rgb(211, 43, 48)", wallY: 320, headerPanel: {image: "media/images/header_panel.png", width: 320, height: 64, z: 3}, pauseButton: {image: "media/images/pause.png", margin: 4, width: 40, height: 40}, progressBar: {image: "media/images/bar_filler.png", x: 20, y: 52, z: 4, width: 280, height: 8}, battleField: {image: "media/images/battle_field.png", width: 320, height: 416}, equippedWeapon: {backgroundColor: "rgba(0, 0, 0, 0.75)", x: 214, y: 4, width: 40, height: 40}, lever: {image: "media/images/lever.png", margin: -4, width: 80, height: 56}}, overlay: {z: 5}, xam: {image: "media/images/xam.png", y: 314, z: 2, width: 32, height: 32, animations: {up: {frameRate: 5, frames: [
    [0, 0],
    [32, 0]
]}, upPain: {frameRate: 5, frames: [
    [0, 96],
    [32, 96]
]}, left: {frameRate: 5, frames: [
    [0, 32],
    [32, 32]
]}, leftPain: {frameRate: 5, frames: [
    [0, 128],
    [32, 128]
]}, right: {frameRate: 5, frames: [
    [0, 64],
    [32, 64]
]}, rightPain: {frameRate: 5, frames: [
    [0, 160],
    [32, 160]
]}, death: {frameRate: 4, frames: [
    [0, 192],
    [32, 192],
    [64, 192]
], loop: !1}}}, spawnPoints: {small: [32, 64, 128, 160, 224, 256], large: [32, 128, 224]}, monster: {bat: {image: "media/images/monsters/bat.png"}, demoblin: {image: "media/images/monsters/demoblin.png"}, flamingSkull: {image: "media/images/monsters/flaming_skull.png"}, gel: {image: "media/images/monsters/gel.png"}, goblin: {image: "media/images/monsters/goblin.png"}, wizard: {image: "media/images/monsters/wizard.png"}, owlbear: {image: "media/images/monsters/owlbear.png"}, cyclops: {image: "media/images/monsters/cyclops.png"}, dragon: {image: "media/images/monsters/green_dragon.png"}, width: 32, height: 32, largeWidth: 64, largeHeight: 64, getAnimations: function (a, b) {
    return{down: {frameRate: 5, frames: [
        [0, 0],
        [a, 0]
    ]}, up: {frameRate: 5, frames: [
        [0, b],
        [a, b]
    ]}, downPain: {frameRate: 5, frames: [
        [0, b * 3],
        [a, b * 3]
    ]}, upPain: {frameRate: 5, frames: [
        [0, b * 4],
        [a, b * 4]
    ]}, idle: {frameRate: 0, frames: [
        [0, 0]
    ]}, idlePain: {frameRate: 0, frames: [
        [0, b * 3]
    ]}, death: {frameRate: 3, frames: [
        [0, b * 6],
        [a, b * 6],
        [a * 2, b * 6]
    ], loop: !1}}
}}, gameOverScreen: {color: "rgb(216, 200, 161)", padding: 20, header: {fontSize: 32}, monstersSlain: {fontSize: 20, y: 70}, monstersSlainValue: {y: 85}, debugMode: {fontSize: 20, y: 120}, highScore: {y: 132}, button: {image: "media/images/buttons_colored_narrow.png", quitImageY: 112, y: 174, width: 98, height: 56}, highScoreDragon: {image: "media/images/high_score_dragon.png", x: 220, y: 20, z: 2, width: 116, height: 132}}, settingsScreen: {color: "rgb(216, 200, 161)", padding: 20, header: {fontSize: 32}, yourScore: {fontSize: 16, y: 70}, highScore: {fontSize: 16, y: 95}, playSound: {fontSize: 24, y: 125, width: 132, height: 38}, button: {image: "media/images/buttons_colored_narrow.png", quitImageY: 112, y: 174, width: 98, height: 56}}, checkbox: {color: "rgb(216, 200, 161)", image: "media/images/checkbox.png", width: 38, height: 38}, health: {between: 6, margin: 8}}), define("js/data/monsters", ["djinn/math/Vector2", "djinn/Timer", "djinn/math/core", "../view/viewData"], function (a, b, c, d) {
    return{bat: {bounce: !0, health: 10, damage: 1, init: function () {
        this.velocity = new a(c.random(-10, 10), 50), this._changeDirectionTimer = (new b(500)).on("elapsed", bind(this, function () {
            this.velocity = new a(c.random(-50, 50), c.random(10, 100)), this._changeDirectionTimer.start(c.random(500, 5e3))
        })).start()
    }, tick: function (a) {
        this.x < d.margin ? (this.velocity.x = -this.velocity.x, this.x = d.margin) : this.right > d.width - d.margin && (this.velocity.x = -this.velocity.x, this.right = d.width - d.margin), this.y < -this.height && (this.velocity.y = -this.velocity.y, this.y = -this.height)
    }}, goblin: {health: 15, damage: 1, init: function () {
        this.velocity = new a(0, 120)
    }}, demoblin: {health: 50, damage: 1, init: function () {
        this.velocity = new a(0, 75)
    }}, flamingSkull: {bounce: !0, health: 30, damage: 1, init: function () {
        var b = c.random(100, 200) * (c.random(0, 1) || -1);
        this.velocity = new a(b, c.random(40, 60))
    }, tick: function (a) {
        this.x < d.margin ? (this.velocity.x = -this.velocity.x, this.x = d.margin) : this.right > d.width - d.margin && (this.velocity.x = -this.velocity.x, this.right = d.width - d.margin)
    }}, gel: {bounce: !0, health: 30, damage: 1, init: function () {
        this.velocity = new a(c.random(-50, 50), 50)
    }, onHit: function () {
        this.velocity = new a(c.random(-50, 50), -200)
    }, tick: function (a) {
        this.x < d.margin ? (this.velocity.x = -this.velocity.x, this.x = d.margin) : this.right > d.width - d.margin && (this.velocity.x = -this.velocity.x, this.right = d.width - d.margin), this.y < -this.height && (this.velocity.y = -this.velocity.y, this.y = -this.height)
    }}, wizard: {health: 40, damage: 1, init: function () {
        this._radians = 0, this._startX = this.x, this.velocity = new a(0, 50), this._radius = 25, this._tickMod = 300
    }, tick: function (a) {
        this._radians += a / this._tickMod, this._radians >= Math.PI * 2 && (this._radians -= Math.PI * 2), this.x = this._startX + Math.sin(this._radians) * this._radius, this.y < -this.height && (this.velocity.y = -this.velocity.y, this.y = -this.height)
    }}, owlbear: {size: "large", health: 60, damage: 1, init: function () {
        this.velocity = new a(0, 80)
    }}, cyclops: {size: "large", health: 80, damage: 1, init: function () {
        this.velocity = new a(0, 60)
    }}, dragon: {size: "large", health: 150, damage: 1, init: function () {
        this.velocity = new a(0, 60)
    }}}
}), define("js/view/ProgressBar", ["djinn/View", "djinn/intl", "../model/GameModel", "./viewData"], function (a, b, c, d) {
    return a.extend({init: function (a) {
        var a = merge({image: d.battleScreen.progressBar.image, x: d.battleScreen.progressBar.x, y: d.battleScreen.progressBar.y, z: d.battleScreen.progressBar.z, width: d.battleScreen.progressBar.width, height: d.battleScreen.progressBar.height}, a);
        this._super(a), this.monstersSlain = 0
    }, increment: function () {
        this.monstersSlain += 1, this._update()
    }, reset: function () {
        this._gotNewHighScore = !1, this.imageY = 0, this.monstersSlain = 0, this._update()
    }, _update: function () {
        var a = Math.min(this.monstersSlain / c.get("highScore"), 1);
        this.width = d.battleScreen.progressBar.width * a, this.imageY = a == 1 ? this.height : 0, !this._gotNewHighScore && a == 1 && (this._gotNewHighScore = !0, this.fire("newHighScore"))
    }})
}), define("js/view/WeaponView", ["djinn/View", "djinn/math/Vector2", "../data/weapons", "./viewData"], function (a, b, c, d) {
    return a.extend({init: function (a) {
        var a = merge({image: d.objects.image, width: d.objects.width, height: d.objects.height}, a);
        this._super(a), this._data = c[a.type], this.bounce = this._data.bounce, this.damage = this._data.damage, this.speed = this._data.speed;
        var b = d.objects.types;
        this.imageX = b[a.type].imageX, this.imageY = b[a.type].imageY, this.velocity = a.targetVector.scale(this.speed || 0), this.rotation = a.targetVector.heading
    }, tick: function (a) {
        var b = a / 1e3;
        this._data.rotate && (this.rotation -= .2, this.rotation < 0 && (this.rotation += Math.PI * 2)), this.velocity && (this.x += this.velocity.x * b, this.y += this.velocity.y * b)
    }})
}), define("js/view/HighScoreDragonView", ["djinn/View", "djinn/math/core", "djinn/utils/transitions", "./viewData"], function (a, b, c, d) {
    return a.extend({init: function (a) {
        var a = merge({image: d.gameOverScreen.highScoreDragon.image, anchorY: d.gameOverScreen.highScoreDragon.height / 5, width: d.gameOverScreen.highScoreDragon.width, height: d.gameOverScreen.highScoreDragon.height, x: d.gameOverScreen.highScoreDragon.x, y: d.gameOverScreen.highScoreDragon.y, z: d.gameOverScreen.highScoreDragon.z}, a);
        this._super(a), this._sway()
    }, _sway: function () {
        if (!this.visible)return;
        var a = 4e3, b = Math.PI / 16;
        this.tween({rotation: -b}, a, c.easeBoth).tween({rotation: b}, a, c.easeBoth, bind(this, "_sway"))
    }})
}), define("js/view/polish", ["djinn/math/core", "djinn/utils/transitions", "./viewData"], function (a, b, c) {
    return{burst: function (a, c) {
        a.opacity = 0, a.scale = .5, a.tween({opacity: 1, rotation: Math.PI / 2, scale: 1.5}, 100, b.linear).tween({opacity: 0}, 100, b.linear, function () {
            c && c()
        })
    }, buttonPress: function (a, c) {
        a.tween({y: a.y + a.height / 10}, 50, b.linear).tween({y: a.y}, 50, b.linear, c)
    }, fadeOut: function (a, c, d) {
        a.tween({opacity: 0}, c, b.linear, d)
    }, fadeIn: function (a, c, d) {
        a.tween({opacity: 1}, c, b.linear, d)
    }, hover: function (a) {
        var b = a.y;
        a.tick = function (a) {
            this._radians === undefined && (this._radians = 0), this._radians += a / 300, this._radians >= Math.PI * 2 && (this._radians -= Math.PI * 2), this.y = b + Math.sin(this._radians) * 2
        }
    }, popIn: function (d, e, f, g) {
        var h = a.random(1, 2) == 1 ? 2 : -2, i = a.clamp(d.x + d.width * h, 0, c.width - d.width), j = d.y;
        d.opacity = f || 0, d.scale = e || .5, d.y += d.height / 2, d.tween({opacity: 1, scale: 1, x: i, y: j}, 200, b.linear).tween({scale: 1.25}, 50, b.linear).tween({scale: 1}, 50, b.linear, g)
    }, popOut: function (a, c, d, e) {
        a.opacity = 1, a.tween({scale: .75}, 50, b.linear).tween({opacity: 0, scale: 2}, 250, b.linear, e)
    }, vibrate: function (b, c, d, e, f) {
        b.completeTween();
        var d = d || 10, g = (e || 250) / d, c = c || 6, h = b.x, i = b.y;
        for (var j = 0; j < d; ++j)b.tween({x: b.x + a.random(-c, c), y: b.y + a.random(-c, c)}, g);
        b.delayTween(0, function () {
            b.x = h, b.y = i, f && f()
        })
    }}
}), define("js/view/ButtonView", ["djinn/View", "djinn/TextView", "djinn/utils/transitions", "./polish", "./viewData"], function (a, b, c, d, e) {
    return a.extend({init: function (a) {
        var a = merge(a, {acceptInputEvents: !0, image: e.button.image, width: e.button.width, height: e.button.height});
        this._super(a), this._enabled = !0, this._defaultImageY = a.defaultImageY || 0, this.imageY = this._defaultImageY, this._textView = (new b({parent: this, text: a.text, color: e.button.color, textAlign: "center", verticalAlign: "middle", height: this.height})).align("center", "center"), this.on("inputStart", this, "_onInputStart"), Object.defineProperty(this, "text", {set: function (a) {
            this._textView.text = a
        }})
    }, enable: function () {
        return this._enabled = !0, this.imageY = this._defaultImageY, this
    }, disable: function () {
        return this._enabled = !1, this.imageY = this.height, this
    }, _onInputStart: function () {
        this._enabled && d.buttonPress(this, bind(this, function () {
            this.fire("pressed")
        }))
    }})
}), define("js/view/GameOverScreen", ["djinn/View", "djinn/TextView", "djinn/utils/transitions", "djinn/intl", "../model/GameModel", "./ButtonView", "./HighScoreDragonView", "./viewData"], function (a, b, c, d, e, f, g, h) {
    return a.extend({init: function (c) {
        var c = merge({acceptInputEvents: !0, width: h.width, height: h.height}, c);
        this._super(c), this._monstersSlainDisplay = null, this.monstersSlain = null, this._radians = 0, this._modalView = (new a({acceptInputEvents: !0, parent: this, image: h.modal.image, width: h.modal.width, height: h.modal.height})).align("center", "center", h.modal.offsetX), this._modalStartY = this._modalView.y, this._gameOverText = (new b({parent: this._modalView, text: d.get("GAME_OVER"), color: h.gameOverScreen.color, fontSize: h.gameOverScreen.header.fontSize, textAlign: "center", y: h.gameOverScreen.padding})).align("center"), this._monstersSlainText = (new b({parent: this._modalView, text: d.get("MONSTERS_SLAIN"), color: h.gameOverScreen.color, textAlign: "center", y: h.gameOverScreen.monstersSlain.y})).align("center"), this._monstersSlainValueText = (new b({parent: this._modalView, textAlign: "center", fontFamily: h.numbers.fontFamily, fontSize: h.gameOverScreen.header.fontSize, strokeColor: h.numbers.strokeColor, strokeWidth: h.numbers.strokeWidth, y: h.gameOverScreen.monstersSlainValue.y})).align("center"), this._highScoreText = (new b({parent: this._modalView, color: h.gameOverScreen.color, textAlign: "center", y: h.gameOverScreen.highScore.y})).align("center").on("inputStart", this, "_onHighScoreTextPressedForSomeReason");
        var e = h.gameOverScreen.button, i = h.margin / 2;
        this._quitButton = (new f({parent: this._modalView, image: e.image, text: d.get("QUIT"), defaultImageY: e.quitImageY, x: this._modalView.width / 2 - e.width - i, y: e.y, width: e.width, height: e.height})).on("pressed", this, "_onPressedQuit"), this._continueButton = (new f({parent: this._modalView, image: e.image, text: d.get("PLAY_AGAIN"), x: this._modalView.width / 2 + i, y: h.gameOverScreen.button.y, width: e.width, height: e.height})).on("pressed", this, "_onPressedContinue"), this._highScoreDragonView = new g({parent: this, visible: !1})
    }, _onHighScoreTextPressedForSomeReason: function () {
        this._highScoreDragonView.toggle()
    }, _onPressedContinue: function () {
        this._continueButton.disable(), this.fire("pressedContinue")
    }, _onPressedQuit: function () {
        this._quitButton.disable(), this.fire("pressedQuit")
    }, show: function () {
        this._modalView.y = -this._modalView.height, this._monstersSlainText.opacity = 0, this._monstersSlainValueText.hide(), this._highScoreText.opacity = 0, this.gotNewHighScore ? this._highScoreText.text = d.get("NEW_HIGH_SCORE") : (this._highScoreText.scale = 1, this._highScoreText.text = d.get("HIGH_SCORE") + " " + e.get("highScore")), this._continueButton.enable(), this._quitButton.enable(), this._highScoreDragonView.hide(), this._super(), this._modalView.tween({y: this._modalStartY}, 1e3, c.bounceOut, bind(this, function () {
            var a = 500;
            this._monstersSlainText.tween({opacity: 1}, a, c.linear), this._highScoreText.tween({opacity: 1}, a, c.linear, bind(this, function () {
                this._monstersSlainDisplay = 0, this._monstersSlainValueText.text = 0, this._monstersSlainValueText.show()
            }))
        }))
    }, hide: function (a) {
        var b = this._super;
        this._modalView.tween({y: -this._modalView.height}, 500, c.easeIn, function () {
            b(), a && a()
        })
    }, tick: function (a) {
        this._super && this._super(a), this.visible && this._monstersSlainDisplay < this.monstersSlain && (this._monstersSlainDisplay += Math.round(a / 20), this._monstersSlainDisplay = Math.min(this._monstersSlainDisplay, this.monstersSlain), this._monstersSlainValueText.text = this._monstersSlainDisplay), this.gotNewHighScore && (this._radians += a / 100, this._radians > Math.PI * 2 && (this._radians -= Math.PI * 2), this._highScoreText.scale = 1.5 + Math.sin(this._radians) / 10)
    }})
}), define("js/view/HealthView", ["djinn/View", "djinn/utils/transitions", "../model/GameModel", "./polish", "./viewData"], function (a, b, c, d, e) {
    return a.extend({init: function (b) {
        var b = merge({width: e.width, height: e.height}, b);
        this._super(b), this._maxHealth = c.MAX_PLAYER_HEALTH, this._heartViews = [];
        var d = e.objects.width + e.health.between, f = this._maxHealth * d;
        for (var g = 0; g < this._maxHealth; ++g)this._heartViews.push(new a({parent: this, image: e.objects.image, imageX: e.objects.types.heart.imageX, imageY: e.objects.types.heart.imageY, x: e.margin + d * g, y: e.margin, width: e.objects.width, height: e.objects.height}))
    }, heal: function (a) {
        this._update(a)
    }, reset: function () {
        for (var a = 0; a < this._maxHealth; ++a)this._heartViews[a].opacity = 1, this._heartViews[a].scale = 1
    }, takeDamage: function (a) {
        this._update(a)
    }, _update: function (a) {
        var d = 100;
        for (var e = 0; e < c.MAX_PLAYER_HEALTH; ++e) {
            var f = this._heartViews[e];
            f.cancelTween(), e < a ? f.tween({opacity: 1, scale: 1}, d, b.linear) : f.tween({opacity: 0, scale: .5}, d, b.linear)
        }
    }})
}), define("js/view/PauseButton", ["djinn/View", "djinn/utils/transitions", "./polish", "./viewData"], function (a, b, c, d) {
    return a.extend({init: function (a) {
        var b = d.battleScreen.pauseButton, a = merge({image: b.image, width: b.width, height: b.height}, a);
        this._super(a), this._enabled = !0, Object.defineProperty(this, "enabled", {set: function (a) {
            this._enabled = a, this.imageY = a ? 0 : this.height
        }}), this.on("inputStart", this, "_onInputStart")
    }, _onInputStart: function (a) {
        a.cancel = !0, this._enabled && c.buttonPress(this, bind(this, function () {
            this.fire("pressed")
        }))
    }})
}), define("js/view/StarburstView", ["djinn/View", "./polish", "./viewData"], function (a, b, c) {
    return a.extend({init: function (a) {
        var d = c.objects, a = merge({image: d.image, imageX: d.types.starburst.imageX, imageY: d.types.starburst.imageY, width: d.width, height: d.height, z: d.types.starburst.z}, a);
        this._super(a), b.burst(this, bind(this, function () {
            this.removeFromParent()
        }))
    }})
}), define("js/view/EquippedWeaponView", ["djinn/View", "djinn/utils/transitions", "../model/GameModel", "./polish", "./viewData"], function (a, b, c, d, e) {
    return a.extend({init: function (b) {
        var d = e.battleScreen.equippedWeapon, b = merge({backgroundColor: d.backgroundColor, clip: !0, x: d.x, y: d.y, width: d.width, height: d.height}, b);
        this._super(b), this._depletedTimer = this.createBoundTimer(c.WEAPON_DURATION, "_onDepletedElapsed");
        var f = e.objects.width, g = d.height / 2 - d.barHeight / 2;
        this._barFillView = new a({parent: this, width: d.width, height: d.height}), this._objectView = (new a({parent: this, image: e.objects.image, width: e.objects.width, height: e.objects.height})).align("center", "center")
    }, _onDepletedElapsed: function () {
        this._depletedTimer.stop(), this.hide(), this.fire("depleted")
    }, equipWeapon: function (a) {
        var b = ["axe", "spear", "sword"];
        if (b.indexOf(a) > -1)return;
        var c = e.objects.types;
        this._objectView.imageX = c[a].imageX, this._objectView.imageY = c[a].imageY, this._depletedTimer.start(), this.show()
    }, tick: function () {
        var a = this._depletedTimer.percentComplete / 100, b = this.height * a;
        this._barFillView.backgroundColor = e.bars.getColor(1 - a), this._barFillView.y = b
    }})
}), define("js/SoundIOS", ["djinn/Emitter", "djinn/Timer", "./model/GameModel"], function (a, b, c) {
    var d = a.extend({init: function () {
        this._super(), this.enabled = c.get("soundEnabled"), this._audioNode = null, this._stopAudioTimer = (new b).on("elapsed", this, "_onStopAudioTimerElapsed"), this._sounds = {celebrate: {start: 16, duration: .75}, equip: {start: 56, duration: .4}, input: {start: 40, duration: .5}, monsterDies: {start: 32, duration: .75}, monsterDiesLarge: {start: 24, duration: .75}, pause: {start: 40, duration: .5}, xamDies: {start: 8, duration: 3.9}, xamPain: {start: 0, duration: .4}}
    }, load: function () {
        var a = new Audio;
        a.src = "media/sound_effects/audio_sheet.mp3", a.play(), a.pause(), this._audioNode = a
    }, _onStopAudioTimerElapsed: function () {
        this._audioNode.pause(), this._stopAudioTimer.stop()
    }, play: function (a) {
        if (!this.enabled)return;
        if (this._audioNode)try {
            if (a in this._sounds) {
                var b = this._sounds[a];
                this._audioNode.pause(), this._audioNode.currentTime = b.start, this._audioNode.play(), this._stopAudioTimer.start(b.duration * 1e3)
            }
        } catch (c) {
            logger.warn("SoundIOS.play() caught an error: " + c)
        } else logger.warn("SoundIOS: iOS audio not ready yet")
    }, stop: function () {
        this._onStopAudioTimerElapsed()
    }});
    return new d
}), define("js/Sound", ["djinn/Emitter", "djinn/client", "./SoundIOS", "./model/GameModel"], function (a, b, c, d) {
    var e = a.extend({init: function () {
        this._super(), this.enabled = d.get("soundEnabled"), this._audioNodes = {}, this._sounds = {celebrate: "media/sound_effects/celebrate.mp3", equip: "media/sound_effects/equip.mp3", input: "media/sound_effects/input.mp3", monsterDies: "media/sound_effects/monster_dies.mp3", monsterPain: "media/sound_effects/goblin_damage_.mp3", monsterDiesLarge: "media/sound_effects/monster_dies_large.mp3", music: "media/music/cave.mp3", pause: "media/sound_effects/pause.mp3", unpause: "media/sound_effects/unpause.mp3", xamAttack: "media/sound_effects/char_attacks_.mp3", xamAttackFire: "media/sound_effects/char_attacks_fire_.mp3", xamAttackIce: "media/sound_effects/xam_attacks_ice.mp3", xamDies: "media/sound_effects/xam_dies.mp3", xamPain: "media/sound_effects/xam_pain.mp3"}
    }, load: function () {
        for (var a in this._sounds) {
            var b = this._sounds[a], c = new Audio;
            c.oncanplaythrough = function (a) {
                a.loaded = !0
            }(c), c.src = b, this._audioNodes[a] = c
        }
    }, play: function (a, b) {
        if (!this.enabled)return;
        var c = this._audioNodes[a];
        if (c && c.loaded) {
            try {
                c.currentTime = 0, c.loop = a == "music"
            } catch (d) {
                logger.warn("[sound.play] audioNode.currentTime error: " + d)
            }
            c.play()
        } else logger.warn("[sound.play] key '" + a + "' not ready yet")
    }, stop: function (a) {
        var b = this._audioNodes[a];
        if (b && b.loaded)try {
            b.pause()
        } catch (c) {
            logger.warn("[sound.stop] error: " + c)
        } else logger.warn("[sound.stop] key '" + a + "' not ready yet")
    }});
    return e = new e, b.isTouch ? c : e
}), define("js/view/TitleScreen", ["djinn/View", "djinn/TextView", "djinn/utils/transitions", "djinn/intl", "../Sound", "../model/GameModel", "./ButtonView", "./polish", "./viewData", "djinn/manifest"], function (a, b, c, d, e, f, g, h, i, j) {
    return a.extend({init: function (c) {
        var c = merge({acceptInputEvents: !0, image: i.titleScreen.image, width: i.width, height: i.height}, c);
        this._super(c), this._titleView = (new a({parent: this, image: i.titleScreen.title.image, x: i.titleScreen.title.x, width: i.titleScreen.title.width, height: i.titleScreen.title.height})).align("center"), this._highScoreText = new b({parent: this, text: d.get("HIGH_SCORE"), fontFamily: i.numbers.fontFamily, fontSize: i.titleScreen.highScore.fontSize, shadowColor: null, strokeColor: i.numbers.strokeColor, strokeWidth: i.numbers.strokeWidth, textAlign: "center", x: i.titleScreen.highScore.x, y: i.titleScreen.highScore.y}), this._highScoreValueText = new b({parent: this, fontFamily: i.numbers.fontFamily, fontSize: i.titleScreen.highScore.valueFontSize, shadowColor: null, strokeColor: i.numbers.strokeColor, strokeWidth: i.numbers.strokeWidth, textAlign: "center", x: i.titleScreen.highScore.x, y: i.titleScreen.highScore.y + this._highScoreText.height}), this.buttonView = (new g({parent: this, text: d.get("LOADING"), y: i.titleScreen.button.y})).disable(), this.buttonView.on("pressed", bind(this, function () {
            e.play("input"), this.buttonView.disable(), this.fire("playButton")
        })), this._monstersView = new a({parent: this, image: i.titleScreen.monsters.image, x: i.titleScreen.monsters.x, width: i.titleScreen.monsters.width, height: i.titleScreen.monsters.height});
        var h = (new b({parent: this, text: sprintf(d.get("COPYRIGHT"), j.version), textAlign: "center"})).align("center", "top", null, i.margin / 2);
        f.on("changed:highScore", this, "_update"), this._update()
    }, doneLoading: function () {
        this.buttonView.text = d.get("PLAY"), this.buttonView.enable()
    }, show: function () {
        this.opacity = 0, this._monstersView.y = i.height, this._titleView.y = -this._titleView.height, this.buttonView.enable(), this.buttonView.x = i.width, this._highScoreText.opacity = 0, this._highScoreValueText.opacity = 0, h.fadeIn(this, 500, bind(this, function () {
            this._monstersView.tween({y: i.height - this._monstersView.height}, 1e3, c.easeOut, bind(this, function () {
                var a = 1e3;
                this._titleView.tween({y: i.titleScreen.title.y}, a, c.bounceOut), this._highScoreText.tween({opacity: 1}, a), this._highScoreValueText.tween({opacity: 1}, a), this.buttonView.tween({x: i.titleScreen.button.x}, a, c.easeOut)
            }))
        })), this._super()
    }, _update: function () {
        this._highScoreValueText.text = f.get("highScore")
    }})
}), define("js/view/XamView", ["djinn/Sprite", "djinn/Timer", "djinn/utils/transitions", "djinn/math/core", "djinn/math/Vector2", "../Sound", "../data/weapons", "./viewData"], function (a, b, c, d, e, f, g, h) {
    return a.extend({init: function (a) {
        var a = merge({image: h.xam.image, y: h.xam.y, z: h.xam.z, width: h.xam.width, height: h.xam.height, animations: h.xam.animations}, a);
        this._super(a), this.controlScheme = "move", this.alive = !0, this.invincible = !1, this.target = null, this.speed = 200, this._attackTimer = (new b).on("elapsed", this, "_onAttackTimerElapsed"), this._invincibleTimer = (new b(1e3)).on("elapsed", this, "_onInvincibleTimerElapsed"), this._painFlickerTimer = (new b(80)).on("elapsed", this, "_onPainFlickerElapsed"), this._painResetTimer = (new b(1e3)).on("elapsed", this, "_onPainResetElapsed")
    }, attack: function () {
        if (!this.target)return;
        f.play(g[this.weapon].sound || "xamAttack"), this.canAttack = !1, this._attackTimer.reset();
        switch (this.controlScheme) {
            case"aim":
                var a = new e(this.target);
                a.subtract(this.center).normalize();
                var b = -(Math.PI / 2) + .25, c = Math.PI / 2 - .25, d = a.heading;
                d < b ? a = e.makeFromHeading(b) : d > c && (a = e.makeFromHeading(c));
                break;
            case"move":
                if (g[this.weapon].bounce) {
                    this._weaponToggle = !this._weaponToggle;
                    var a = new e({x: this.center.x + (this._weaponToggle ? -this.width : this.width), y: this.center.y - this.height * 3})
                } else var a = new e({x: this.center.x, y: this.center.y - this.height});
                a.subtract(this.center).normalize()
        }
        this.fire("attack", [a])
    }, enter: function () {
        var a = h.width / 2;
        this.playAnimation(this.x < a ? "right" : "left"), this.tween({x: a - this.width / 2}, 1500, c.linear, bind(this, function () {
            this.playAnimation("up")
        }))
    }, hasBaseWeapon: function () {
        return["sword", "axe", "spear"].indexOf(this.weapon) != -1
    }, equipWeapon: function (a) {
        this.weapon = a, this._attackTimer.start(g[a].interval)
    }, _onAttackTimerElapsed: function () {
        this.canAttack = !0
    }, _onInvincibleTimerElapsed: function () {
        this.invincible = !1
    }, _onPainFlickerElapsed: function () {
        this._inPain && (this._showPain = !this._showPain), this.playAnimation(this.currentAnimation)
    }, _onPainResetElapsed: function () {
        this._painFlickerTimer.stop(), this._painResetTimer.stop(), this._inPain = !1, this._showPain = !1, this.playAnimation(this.currentAnimation)
    }, playAnimation: function (a, b) {
        this._inPain && this._showPain ? a.match(/Pain/) === null && (a += "Pain") : a = a.replace(/Pain/, ""), this._super(a, b)
    }, reset: function () {
        this.alive = !0, this.canAttack = !0, this._inPain = !1, this._showPain = !1, this.invincible = !1, this.target = null, this.x = d.random(1, 2) == 1 ? -this.width : h.width, this.equipWeapon("sword")
    }, takeDamage: function (a) {
        a < 1 ? (f.play("xamDies"), this.alive = !1, this._inPain = !1, this._showPain = !1, this.playAnimation("death")) : (f.play("xamPain"), this.invincible = !0, this._invincibleTimer.start(), this._inPain = !0, this._showPain = !0, this._painFlickerTimer.start(), this._painResetTimer.start(), this.playAnimation(this.currentAnimation))
    }, tick: function (a) {
        this._super(a);
        if (!this.alive)return;
        if (this.target) {
            this.canAttack && this.attack();
            if (this.controlScheme == "move") {
                var b = this.center.x - this.target.x, c = Math.abs(b);
                c >= h.margin ? this.playAnimation(b > 0 ? "left" : "right", !1) : this.playAnimation("up", !1);
                if (c >= 5) {
                    var d = a / 1e3;
                    b > 0 ? this.x -= d * this.speed : b < 0 && (this.x += d * this.speed)
                } else this.x = this.target.x - this.width / 2
            }
        }
    }})
}), define("js/view/MonsterView", ["djinn/Sprite", "djinn/math/Vector2", "djinn/utils/transitions", "../Sound", "../model/GameModel", "../data/monsters", "./polish", "./viewData"], function (a, b, c, d, e, f, g, h) {
    return a.extend({init: function (a) {
        this._data = f[a.type];
        if (this._data.size == "large")var b = h.monster.largeWidth, c = h.monster.largeHeight; else var b = h.monster.width, c = h.monster.height;
        var a = merge({image: h.monster[a.type].image, y: -c, width: b, height: c, animations: h.monster.getAnimations(b, c)}, a);
        this._super(a), this._data = f[a.type], this._health = this._data.health, this._data.init && this._data.init.apply(this), this.alive = !0, this.rotVelocity = {x: 0, y: 0}, this.speed = 150, this.playAnimation("down")
    }, attack: function () {
        e.hitPlayer(this._data.damage), this._bounceBack()
    }, _bounceBack: function () {
        if (this._data.bounce)this.velocity.y *= -1; else {
            var a = this._data.size == "large" ? -450 : -350;
            this.rotVelocity.y = a
        }
    }, hit: function (a) {
        this._health -= a;
        if (this._health > 0) {
            if (!this._inPain) {
                this._inPain = !0, d.play(this._data.painSound || "monsterPain");
                var b = this.currentAnimation;
                b.match(/Pain/) === null && this.playAnimation(b + "Pain");
                if (this._data.onHit)this._data.onHit.apply(this, [a]); else {
                    var c = this.velocity;
                    this.velocity = {x: 0, y: 0}
                }
                this.delayTween(200, bind(this, function () {
                    this._data.onHit || (this._inPain = !1, this.velocity = c), this.playAnimation(b)
                }))
            }
            return!1
        }
        return this.kill(), !0
    }, kill: function () {
        this.alive = !1, this.velocity = {x: 0, y: 0}, this.cancelTween(), this.playAnimation("death"), this.delayTween(1e3, bind(this, function () {
            g.fadeOut(this, 500, bind(this, function () {
                this.removeFromParent()
            }))
        })), this._data.size == "large" ? d.play("monsterDiesLarge") : d.play("monsterDies")
    }, render: function (a) {
        this._super(a);
        if (this.alive && this._health < this._data.health) {
            var b = this._health / this._data.health;
            a.fillStyle = h.bars.backgroundColor, a.fillRect(-1, this.height, this.width + 2, h.bars.height), a.fillStyle = h.bars.getColor(b), a.fillRect(0, this.height + 1, this.width * b, h.bars.height - 2)
        }
    }, tick: function (a) {
        this._super(a);
        if (!this.alive)return;
        this._data.tick && this._data.tick.apply(this, [a]);
        var b = a / 1e3;
        this.velocity && (this.x += this.velocity.x * b, this.y += this.velocity.y * b), this.rotVelocity.y < 0 && (this.y += this.rotVelocity.y * b, this.rotVelocity.y += a / 2, this.rotVelocity.y > 0 && (this.rotVelocity.y = 0)), this.bottom > h.battleScreen.wallY && (this.bottom = h.battleScreen.wallY, this._bounceBack())
    }, wander: function () {
        this.velocity.y = 0, this.playAnimation("idle"), this.delayTween(1500, bind(this, function () {
            this.velocity.y = -(this.speed / 5), this.playAnimation("up")
        }))
    }})
}), define("js/view/LootView", ["djinn/View", "djinn/TextView", "djinn/utils/transitions", "../Sound", "../model/GameModel", "./polish", "./viewData"], function (a, b, c, d, e, f, g) {
    return a.extend({init: function (a) {
        var a = merge({image: g.objects.image, imageX: g.objects.types[a.type].imageX, imageY: g.objects.types[a.type].imageY, width: g.objects.width, height: g.objects.height}, a);
        this._super(a), this._type = a.type, a.creator && this.centerOn(a.creator), this.y < 0 && (this.y = 0), f.popIn(this, null, null, bind(this, function () {
            f.hover(this);
            var a = 20;
            this.numFlashes = 1, this.delayTween(1e3);
            for (var b = 0; b < a; ++b)this.delayTween((30 - b) * 6, bind(this, function () {
                this.opacity = this.opacity == 1 ? 0 : 1, ++this.numFlashes == a && (this.expired = !0)
            }))
        }))
    }, collect: function () {
        if (this.collected)return;
        this.collected = !0;
        switch (this._type) {
            case"heart":
                e.healPlayer(1);
                break;
            default:
                d.play("equip"), e.equipWeapon(this._type)
        }
        this.cancelTween(), f.popOut(this, null, null, bind(this, function () {
            this.expired = !0
        }))
    }})
}), define("js/view/BattleScreen", ["djinn/View", "djinn/TextView", "djinn/math/core", "djinn/utils/transitions", "djinn/intl", "../Sound", "../model/GameModel", "../data/monsters", "./ProgressBar", "./XamView", "./WeaponView", "./MonsterView", "./LootView", "./HealthView", "./DifficultyView", "./PauseButton", "./StarburstView", "./EquippedWeaponView", "./polish", "./viewData"], function (a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t) {
    var u = 1.6;
    return a.extend({init: function (c) {
        var c = merge({acceptInputEvents: !0, width: t.width, height: t.height}, c);
        this._super(c), this._combo = 0, this.running = !1, this.paused = !1, this._spawnTimer = this.createBoundTimer(0, "_onSpawnTimerElapsed"), this._spawnCount = 1;
        var d = new a({acceptInputEvents: !0, parent: this, image: t.battleScreen.headerPanel.image, z: t.battleScreen.headerPanel.z, width: t.battleScreen.headerPanel.width, height: t.battleScreen.headerPanel.height});
        this._healthView = new n({parent: d}), this._equippedWeaponView = (new r({parent: d, visible: !1, width: t.width, height: t.height, z: 100})).on("depleted", this, "_onEquippedWeaponDepleted");
        var e = t.battleScreen.pauseButton;
        this._pauseButton = (new p({acceptInputEvents: !0, parent: d})).align("right", "top", -e.margin, e.margin), this._progressBar = (new i({parent: d})).on("newHighScore", this, "_onNewHighScore"), this._battleFieldView = (new a({parent: this, image: t.battleScreen.battleField.image, width: t.battleScreen.battleField.width, height: t.battleScreen.battleField.height})).align(null, "bottom"), this._messageText = (new b({parent: this, fontSize: t.battleScreen.fontSize, textAlign: "center", visible: !1})).align("center", "center"), this._xamView = (new j({parent: this._battleFieldView})).on("attack", this, "_onXamAttack"), this._leverView = (new a({parent: this._battleFieldView, image: t.battleScreen.lever.image, width: t.battleScreen.lever.width, height: t.battleScreen.lever.height})).align("center", "bottom", null, t.battleScreen.lever.margin), this._difficultyView = new o({parent: this, visible: !1, width: t.width, height: t.height, z: 100}), this._overlayView = new a({parent: this, backgroundColor: t.battleScreen.painColor, opacity: 0, width: this.width, height: this.height}), this._overlayView.tick = function (a) {
            this.opacity > 0 && (this.opacity -= a / 800)
        }, this.on("inputStart", this, "_onInputStart"), this.on("inputMove", this, "_onInputMove"), this.on("inputEnd", this, "_onInputEnd"), this._pauseButton.on("pressed", this, "_onPressedPause"), g.on("gotWeapon", this, "_onGotWeapon"), g.on("playerDamaged", this, "_onPlayerDamaged"), g.on("playerHealed", this, "_onPlayerHealed")
    }, _clampInput: function (a) {
        return{x: c.clamp(a.x, t.margin, t.width - t.margin), y: this._xamView.y - this._xamView.height}
    }, _forEach: function (a, b) {
        for (var c in a)b(a[c])
    }, _getComputedDifficulty: function () {
        return this._difficulty.value
    }, _getMonsterSpawnPoint: function (a) {
        var a = a || "small", b = t.spawnPoints[a];
        return b[c.random(b)]
    }, _getMonsterType: function () {
        var a = this._getComputedDifficulty();
        if (a < 20)var b = ["bat", "goblin", "demoblin"]; else if (a < 50)var b = ["demoblin", "flamingSkull", "gel", "goblin", "owlbear"]; else if (a < 70)var b = ["bat", "demoblin", "flamingSkull", "gel", "goblin", "wizard", "owlbear", "cyclops"]; else if (a < 90)var b = ["demoblin", "flamingSkull", "wizard", "owlbear", "cyclops"]; else if (a < 100)var b = ["flamingSkull", "gel", "wizard", "owlbear", "cyclops"]; else var b = ["dragon"];
        return b[c.random(0, b.length - 1)]
    }, _getNextSpawnTime: function () {
        var a = this._getComputedDifficulty();
        return a < 25 ? c.random(1500, 2e3) : a < 50 ? c.random(1e3, 1500) : a < 90 ? c.random(750, 1250) : c.random(500, 1e3)
    }, _getRandomWeaponType: function () {
        var a = this._xamView.weapon, b = a.replace(/\d/, ""), d = Number(a.substr(-1));
        if (a == "runeforge")return null;
        if (isNaN(d)) {
            var e = ["axe", "spear", "sword"], f = e.indexOf(b);
            e[f] += "2", e.push(a + "2")
        } else if (d == 3)var e = [a, a, "runeforge"]; else var e = [a, b + String(d + 1)];
        return e[c.random(e)]
    }, _makeDamageStarburst: function (a) {
        (new q({parent: this._battleFieldView})).centerOn(a)
    }, _onEquippedWeaponDepleted: function () {
        var a = ["axe", "spear", "sword"];
        this._xamView.equipWeapon(a[c.random(a)])
    }, _resetDifficulty: function (a) {
        this._difficulty.fluctuation = 0, this._difficulty.rateOfIncrease = u, this._difficulty.value = a || 0
    }, _onXamAttack: function (a) {
        if (!a)return;
        var b = (new k({parent: this._battleFieldView, targetVector: a, type: this._xamView.weapon})).centerOn(this._xamView);
        this._weaponViews[b.id] = b
    }, _onInputStart: function (a) {
        if (!this._acceptInput)return;
        this._inputStarted = !0;
        var b = this._clampInput(a.point);
        this._xamView.target = b, this._updateLever(a.point)
    }, _onInputMove: function (a) {
        if (!this._acceptInput || !this._inputStarted)return;
        var b = this._clampInput(a.point);
        this._xamView.target = b, this._updateLever(a.point)
    }, _onInputEnd: function (a) {
        this._inputStarted = !1, this._xamView.target = null
    }, _onGotWeapon: function (a) {
        this._equippedWeaponView.equipWeapon(a), this._xamView.equipWeapon(a)
    }, _onNewHighScore: function () {
        this._showNewHighScoreText()
    }, _onPlayerDamaged: function () {
        this._spawnTimer.start(2e3), this._xamView.takeDamage(g.playerHealth), this._healthView.takeDamage(g.playerHealth), this._difficulty.rateOfIncrease = u, this._difficulty.rateOfIncrease += (g.MAX_PLAYER_HEALTH - g.playerHealth) / g.MAX_PLAYER_HEALTH * u, this._comboBreaker(), s.vibrate(this), this._overlayView.opacity = .6, g.playerHealth < 1 && (f.stop("music"), this._pauseButton.enabled = !1, this._leverView.imageY = this._leverView.height, this._acceptInput = !1, this._spawnTimer.stop(), this._forEach(this._monsterViews, function (a) {
            a.alive && a.wander()
        }), this._equippedWeaponView.hide(), this.fire("gameOver", [this._progressBar.monstersSlain]))
    }, _onPlayerHealed: function (a) {
        this._healthView.heal(a)
    }, reset: function () {
        g.reset(), this.paused = !1, this.running = !1, this._spawnCount = 1, this._combo = 0, this._progressBar.reset(), this._xamView.reset(), this._healthView.reset(), this._leverView.align("center"), this._leverView.imageY = this._leverView.height, this._pauseButton.enabled = !1, this._equippedWeaponView.hide(), this._difficulty = this._difficultyView.difficulty = {fluctuation: 0, rateOfIncrease: u, value: 1}, this._forEach(this._weaponViews, bind(this, function (a) {
            a.removeFromParent(), delete this._weaponViews[a.id]
        })), this._weaponViews = {}, this._forEach(this._monsterViews, bind(this, function (a) {
            a.removeFromParent(), delete this._monsterViews[a.id]
        })), this._monsterViews = {}, this._forEach(this._lootViews, bind(this, function (a) {
            a.removeFromParent(), delete this._lootViews[a.id]
        })), this._lootViews = {}
    }, _onSpawnTimerElapsed: function () {
        if (!this._acceptInput)return;
        for (var a = 0; a < this._spawnCount; ++a)this._spawnMonster();
        this._difficulty.value >= 100 && (this._resetDifficulty(c.random(25, 50)), ++this._spawnCount);
        var b = this._getNextSpawnTime();
        this._spawnTimer.start(b)
    }, pause: function () {
        this.paused = !1, this.togglePause()
    }, togglePause: function () {
        this.paused = !this.paused, this.running = !this.paused, this._pauseButton.enabled = !this.paused, this._acceptInput = this.paused ? !1 : !0, this._leverView.imageY = this._acceptInput ? 0 : this._leverView.height, f.play(this.paused ? "pause" : "unpause"), this.paused ? f.stop("music") : f.play("music")
    }, _onPressedPause: function (a) {
        if (this.paused)return;
        this.fire("pressedPause", [this._progressBar.monstersSlain])
    }, render: function (a) {
        this._super(a)
    }, _showReadyText: function (a) {
        var b = this._messageText;
        b.opacity = 0, b.scale = 5, b.text = e.get("READY"), b.show(), a && b.delayTween(a), b.tween({opacity: 1, scale: 1}, 500), b.delayTween(1500), b.tween({opacity: 0, scale: .1}, 500, d.linear, function () {
            b.hide()
        })
    }, _showNewHighScoreText: function () {
        f.play("celebrate");
        var a = this._messageText;
        a.opacity = 0, a.scale = 0, a.text = e.get("NEW_HIGH_SCORE"), a.show(), a.tween({opacity: 1, scale: .7}, 500).delayTween(1e3).tween({opacity: 0, scale: 1}, 500, d.linear, function () {
            a.hide()
        })
    }, _spawnLoot: function (a) {
        var b, d = this._xamView.hasBaseWeapon() ? 3 : 5;
        c.random(1, d) === 1 ? b = this._getRandomWeaponType() : g.isPlayerHurt() && c.random(1, 10) === 1 && (b = "heart");
        if (b) {
            var e = new m({parent: this._battleFieldView, creator: a, type: b});
            this._lootViews[e.id] = e
        }
    }, _spawnMonster: function () {
        var a = this._getMonsterType(), b = h[a], c = new l({parent: this._battleFieldView, type: a, x: this._getMonsterSpawnPoint(b.size)});
        this._monsterViews[c.id] = c
    }, tick: function (a) {
        if (!this._acceptInput)return;
        this._updateDifficulty(a), this._forEach(this._weaponViews, bind(this, function (a) {
            if (a.bounce)a.x <= 0 ? (a.x = 0, a.velocity.x *= -1) : a.x >= t.width - a.width && (a.x = t.width - a.width, a.velocity.x *= -1), a.y <= -a.height && (delete this._weaponViews[a.id], a.removeFromParent(), this._comboBreaker()); else if (a.x <= -a.width || a.x >= t.width || a.y <= -a.height)delete this._weaponViews[a.id], a.removeFromParent(), this._comboBreaker()
        })), this._forEach(this._lootViews, bind(this, function (a) {
            this._forEach(this._weaponViews, bind(this, function (b) {
                a && c.intersects(a, b) && a.collect()
            })), a.expired && (a.removeFromParent(), delete this._lootViews[a.id])
        }));
        var b = 0;
        this._forEach(this._monsterViews, bind(this, function (a) {
            ++b, this._xamView.alive && !this._xamView.invincible && a.y >= t.battleScreen.wallY - a.height && (a.attack(), this._makeDamageStarburst({x: a.center.x, y: a.center.y + a.height / 2})), this._forEach(this._weaponViews, bind(this, function (b) {
                if (a && c.intersects(a, b)) {
                    var d = b.damage;
                    delete this._weaponViews[b.id], b.removeFromParent(), this._makeDamageStarburst(a.center), a.hit(d) && (this._spawnLoot(a), delete this._monsterViews[a.id], this._incrementCombo(), this._progressBar.increment())
                }
            }))
        })), b < 1 && (this._spawnTimer.reset(), this._spawnMonster())
    }, start: function () {
        f.play("music"), this.running = !0, this._xamView.enter(), this._showReadyText(500), this._spawnTimer.start(2500), this.delayTween(2500, bind(this, function () {
            this._acceptInput = !0, this._leverView.imageY = 0, this._pauseButton.enabled = !0
        }))
    }, _updateDifficulty: function (a) {
        var b = this._difficulty.fluctuation;
        b += a / 2e3, b >= Math.PI * 2 && (b -= Math.PI * 2), this._difficulty.fluctuation = b;
        var d = a / 1e3;
        this._difficulty.value += this._difficulty.rateOfIncrease * d, this._difficulty.value = c.clamp(this._difficulty.value, 1, 100), this._difficultyView.difficulty = this._difficulty
    }, _updateLever: function (a) {
        this._leverView.x = c.clamp(a.x - this._leverView.width / 2, t.margin, t.width - t.margin - this._leverView.width)
    }, _comboBreaker: function () {
        this._combo = 0
    }, hide: function () {
        this.running = !1, this._super()
    }, _incrementCombo: function () {
        ++this._combo
    }})
}), define("js/view/CheckboxView", ["djinn/View", "djinn/TextView", "djinn/utils/transitions", "../Sound", "./polish", "./viewData", "../model/GameModel"], function (a, b, c, d, e, f, g) {
    return a.extend({init: function (a) {
        var c = f.checkbox;
        this._super(merge(a, {acceptInputEvents: !0})), this._checked = d.enabled, this._imageView = new b({parent: this, image: c.image, imageY: this._checked ? 0 : c.height, width: c.width, height: c.height}), this._textView = new b({parent: this, text: a.text, color: f.checkbox.color, verticalAlign: "middle", x: this._imageView.right + f.margin, y: this.height / 2 - f.margin / 2}), this.on("inputStart", this, "_onInputStart"), Object.defineProperty(this, "text", {set: function (a) {
            this._textView.text = a
        }})
    }, _onInputStart: function () {
        e.buttonPress(this._imageView, bind(this, function () {
            this._checked = !this._checked, this._imageView.imageY = this._checked ? 0 : this._imageView.height, d.enabled = this._checked, g.set("soundEnabled", d.enabled), this.fire("check")
        }))
    }})
}), define("js/view/SettingsScreen", ["djinn/View", "djinn/TextView", "djinn/utils/transitions", "djinn/intl", "../Sound", "../model/GameModel", "./ButtonView", "./CheckboxView", "./viewData"], function (a, b, c, d, e, f, g, h, i) {
    return a.extend({init: function (c) {
        var c = merge({acceptInputEvents: !0, width: i.width, height: i.height}, c);
        this._super(c), this._modalView = (new a({acceptInputEvents: !0, parent: this, image: i.modal.image, width: i.modal.width, height: i.modal.height})).align("center", "center", i.modal.offsetX), this._modalStartY = this._modalView.y, this._settingsText = (new b({parent: this._modalView, text: d.get("PAUSED"), color: i.settingsScreen.color, fontSize: i.settingsScreen.header.fontSize, textAlign: "center", y: i.settingsScreen.padding})).align("center"), this._yourScoreText = (new b({parent: this._modalView, color: i.settingsScreen.color, fontSize: i.settingsScreen.yourScore.fontSize, textAlign: "center", y: i.settingsScreen.yourScore.y})).align("center"), this._highScoreText = (new b({parent: this._modalView, color: i.settingsScreen.color, fontSize: i.settingsScreen.highScore.fontSize, textAlign: "center", y: i.settingsScreen.highScore.y})).align("center");
        var e = (new h({parent: this._modalView, text: d.get("PLAY_SOUND"), color: i.settingsScreen.color, fontSize: i.settingsScreen.playSound.fontSize, textAlign: "center", y: i.settingsScreen.playSound.y, width: i.settingsScreen.playSound.width, height: i.settingsScreen.playSound.height})).align("center").on("press", this, "_onPressPlaySound"), f = i.settingsScreen.button, j = i.margin / 2;
        this._quitButton = (new g({parent: this._modalView, image: f.image, text: d.get("QUIT"), defaultImageY: f.quitImageY, x: this._modalView.width / 2 - f.width - j, y: f.y, width: f.width, height: f.height})).on("pressed", this, "_onPressedQuit"), this._continueButton = (new g({parent: this._modalView, image: f.image, text: d.get("CONTINUE"), x: this._modalView.width / 2 + j, y: i.settingsScreen.button.y, width: f.width, height: f.height})).on("pressed", this, "_onPressedContinue")
    }, _onPressPlaySound: function () {
        logger.log("toggle sound")
    }, _onPressedContinue: function () {
        e.play("input"), this._continueButton.disable(), this.fire("continue")
    }, _onPressedQuit: function () {
        e.play("input"), this._quitButton.disable(), this.fire("quit")
    }, show: function (a) {
        this._modalView.y = -this._modalView.height, this._quitButton.enable(), this._continueButton.enable(), this._yourScoreText.text = d.get("YOUR_SCORE") + " " + a, this._highScoreText.text = d.get("HIGH_SCORE") + " " + f.get("highScore"), this._super(), this._modalView.tween({y: this._modalStartY}, 500, c.easeOut)
    }, hide: function (a) {
        var b = this._super;
        this._modalView.tween({y: -this._modalView.height}, 500, c.easeIn, function () {
            b(), a && a()
        })
    }, tick: function (a) {
        this._super && this._super(a)
    }})
}), define("js/OnslaughtDefense", ["djinn/Game", "djinn/View", "djinn/TextView", "djinn/globalTimer", "djinn/assets", "djinn/client", "djinn/stage", "djinn/intl", "./model/GameModel", "./view/TitleScreen", "./view/BattleScreen", "./view/GameOverScreen", "./view/SettingsScreen", "./view/polish", "./view/viewData", "./Sound"], function (a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
    return a.extend({init: function (a) {
        this._super(merge(a, {showFPS: !1, eraseBeforeRender: !1})), c.defaults.color = o.color, c.defaults.fontFamily = o.fontFamily, c.defaults.fontSize = o.fontSize, c.defaults.shadowColor = o.shadowColor, f.on("orientationChange", this, "_updateOrientation");
        var b = (new c({parent: this.view, text: h.get("LOADING"), textAlign: "center"})).align("center", "center");
        e.load([o.titleScreen.image, o.titleScreen.title.image, o.titleScreen.monsters.image, o.button.image], bind(this, function () {
            this._preloadImages(), this._makeViews(), this._updateOrientation(), this._titleScreen.show(), !f.isIOS && p.load()
        })), f.isIOS && g.on("initialInput", function () {
            p.load()
        })
    }, _makeViews: function () {
        var a = new b({acceptInputEvents: !0, parent: this.view, clip: !0, backgroundColor: o.backgroundColor, width: o.width, height: o.height});
        this._battleScreen = (new k({parent: a, visible: !1})).on("gameOver", this, "_onGameOver").on("pressedPause", this, "_onPressedPause"), this._gameOverScreen = (new l({parent: a, visible: !1})).on("pressedContinue", this, "_onPressedGameOverContinue").on("pressedQuit", this, "_onPressedGameOverQuit"), this._settingsScreen = (new m({parent: a, visible: !1})).on("quit", this, "_onPressedSettingsQuit").on("continue", this, "_onPressedSettingsContinue"), this._titleScreen = (new j({parent: a, opacity: 0})).on("playButton", this, "_onPressedPlay")
        this._onPressedPlay()
    }, _onGameOver: function (a) {
        gameOverHandlerFunction(a)
//        this._gameOverScreen.delayTween(500, bind(this, function () {
//            var b = i.get("highScore");
//            this._gameOverScreen.gotNewHighScore = a > b, this._gameOverScreen.monstersSlain = a, this._gameOverScreen.opacity = 1, this._gameOverScreen.show(), a > b && i.set("highScore", a)
//        }))
//
    }, _onPressedGameOverContinue: function () {
        n.fadeOut(this._battleScreen, 250), this._battleScreen.reset(), this._gameOverScreen.hide(bind(this, function () {
            this._gameOverScreen.hide(), this._battleScreen.show(), n.fadeIn(this._battleScreen, 500, bind(this, function () {
                this._battleScreen.start()
            }))
        }))
    }, _onPressedGameOverQuit: function () {
        n.fadeOut(this._battleScreen, 250), this._gameOverScreen.hide(bind(this, function () {
            this._titleScreen.show()
        }))
    }, _onPressedSettingsQuit: function () {
        n.fadeOut(this._battleScreen, 250), this._settingsScreen.hide(bind(this, function () {
            this._titleScreen.show()
        }))
    }, _onPressedSettingsContinue: function () {
        this._settingsScreen.hide(bind(this, function () {
            this._battleScreen.togglePause()
        }))
    }, _onPressedPause: function (a) {
        this._battleScreen.togglePause(), this._settingsScreen.show(a)
    }, _onPressedPlay: function () {
        n.fadeOut(this._battleScreen, 250), this._battleScreen.reset(), n.fadeOut(this._titleScreen, 500, bind(this, function () {
            this._titleScreen.hide(), this._battleScreen.show(), n.fadeIn(this._battleScreen, 500, bind(this, function () {
                this._battleScreen.start()
            }))
        }))
    }, _preloadImages: function () {
        e.load(["media/images/bar_filler.png", "media/images/battle_field.png", "media/images/buttons_colored_narrow.png", "media/images/header_panel.png", "media/images/high_score_dragon.png", "media/images/lever.png", "media/images/modal.png", "media/images/objects.png", "media/images/pause.png", "media/images/xam.png", "media/images/checkbox.png", "media/images/monsters/bat.png", "media/images/monsters/demoblin.png", "media/images/monsters/flaming_skull.png", "media/images/monsters/gel.png", "media/images/monsters/goblin.png", "media/images/monsters/wizard.png", "media/images/monsters/owlbear.png", "media/images/monsters/cyclops.png", "media/images/monsters/green_dragon.png"], bind(this, function () {
            this._titleScreen.doneLoading()
        }))
    }, _updateOrientation: function () {
        f.orientation != "portrait" && this._battleScreen.running && (this._settingsScreen.show(), this._battleScreen.pause())
    }})
});
require(["djinn/global", "djinn/manifest", "djinn/assets", "djinn/stage"], function (a, b, c, d) {
    c.cacheImage("__rotateImage", "data:image/jpeg;base64,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"), d.matchSize(b.sizes), require(["js/OnslaughtDefense"], function (a) {
        var b = new a;
        b.run()
    })
})</script>
    <script>
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-16927444-5']);
        _gaq.push(['_trackPageview']);
        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
	
<canvas width="320" height="480" style="position: absolute; -webkit-transform-origin-x: 0px; -webkit-transform-origin-y: 0px; -webkit-transform: scale(1.3875); left: 418px; top: 0px; "></canvas>


</body></html>